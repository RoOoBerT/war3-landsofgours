//===========================================================================
// 
// Lands of Rohal
// 
//   Warcraft III map script
//   Generated by the Warcraft III World Editor
//   Date: Tue May  1 23:46:09 2018
//   Map Author: RoOoBerT & Jehal
// 
//===========================================================================

//***************************************************************************
//*
//*  Global Variables
//*
//***************************************************************************

globals
    // User-defined
    integer                 udg_CHINTS_COUNT           = 0
    string array            udg_CHINTS
    integer                 udg__int1                  = 0
    integer                 udg__int2                  = 0
    integer                 udg_CPLAYERS_MAX           = 0
    real                    udg_Difficulty_PlayersCount_Coeff = 0
    force                   udg_Players_Active         = null
    real                    udg_Difficulty_Time_Coeff  = 0
    real                    udg_Difficulty_Coeff       = 0
    integer                 udg_Adventures_Count       = 0
    rect array              udg_Adventures_Bounds
    string array            udg_Adventures_Title
    location array          udg_Adventures_Spawn
    real array              udg_Adventures_SpawnOrientation
    location                udg__point1                = null
    integer                 udg_Adv_Cur_Index          = 0
    trigger array           udg_Adventures_TriggerInit
    integer                 udg_Day                    = 0
    real array              udg_Adv_Cur_PowerCoeff
    real                    udg__real1                 = 0
    hashtable               udg_Adv_Cur_UnitsData      = null
    location array          udg_Units_Location
    integer array           udg_Units_Type
    real array              udg_Units_Angle
    integer array           udg_Adventures_Units_IndexMin
    integer array           udg_Adventures_Units_IndexMax
    integer                 udg_Units_Count            = 0
    integer array           udg_Units_Invent1
    group                   udg_Adv_Cur_RohalUnits     = null
    location                udg__point2                = null
    integer array           udg_Function_Spawn_UnitTypes
    integer                 udg_Function_Spawn_UnitTypes_Count = 0
    real array              udg_Function_Spawn_PowerCoeff
    real                    udg_Function_Spawn_MinimumPower = 0
    real                    udg__Function_Spawn_CurrentPower = 0
    unit                    udg_Function_Spawn_Marker  = null
    unit array              udg_Characters
    force                   udg_Players_TownReady      = null
    integer array           udg_UniqueItems_Type
    integer                 udg_UniqueItems_Count      = 0
    item array              udg_UniqueItems_Instance
    integer array           udg_UniqueItems_Available
    unit                    udg_Adv_Cur_Boss           = null
    integer                 udg_Spells_Count           = 0
    integer array           udg_Spells_Capacity
    integer array           udg_Spells_ScrollType
    string array            udg_SpellClass_Name
    integer                 udg_SpellClass_Count       = 0
    integer array           udg_Spells_Class
    integer                 udg_CSPELLCLASS_EVOCATION  = 0
    integer                 udg_CSPELLCLASS_ABJURATION = 0
    integer                 udg_CSPELLCLASS_INVOCATION = 0
    integer                 udg_CSPELLCLASS_NECROMANCIE = 0
    integer                 udg_CSPELLCLASS_TRANSMUTATION = 0
    string array            udg__stringarray1
    string                  udg__string1
    boolean                 udg_GamePar_Debug          = false
    boolean                 udg__bool                  = false
    timer                   udg_Time                   = null
    timerdialog             udg_Time_Window            = null
    hashtable               udg_SpellMagicProj_Data    = null
    group                   udg_SpellMagicProj_Units   = null
    unit                    udg__unit1                 = null
    unit                    udg__unit2                 = null
    location                udg_CPOINT_0_0             = null
    integer                 udg__int_NumberOfProjectiles = 0
    unit                    udg__unit_TargetUnit       = null
    integer array           udg_Spells_MaxLevel
    integer                 udg__int_LevelOfSpell      = 0
    hashtable               udg_SpellAoE_Data          = null
    group                   udg_SpellAoE_Instance      = null
    integer                 udg__int_Duration          = 0
    real                    udg__real_Radius           = 0
    unit                    udg__unit_SpellCaster      = null
    integer array           udg_SpellAoE_Type
    integer array           udg_SpellAoE_DummySpell
    hashtable               udg_Cast_Effects_Table     = null
    texttag                 udg__fltext                = null
    boolean                 udg__bool_SpellCastOk      = false
    integer                 udg__ability1              = 0
    integer array           udg_Bags_ItemType
    integer array           udg_Bags_Slots
    integer                 udg_Bags_Count             = 0
    hashtable               udg_Bags_MagicBags_Data    = null
    unit                    udg_Adv_Cur_Exit           = null
    location                udg_CPOINT_BASE            = null
    force                   udg_Players_Adventure      = null
    hashtable               udg_SpellFleshToStone_Data = null
    group                   udg_SpellFleshToStone_Units = null
    string array            udg_SpellAoE_DummySpell_Order
    group                   udg_SpellCone_Instance     = null
    hashtable               udg_SpellCone_Data         = null
    real                    udg__real_Time             = 0
    hashtable               udg_SpellRayon_Data        = null
    group                   udg_SpellRayon_Instance    = null
    real                    udg__real_Frequency        = 0
    real                    udg__real_TimeEnd          = 0
    real                    udg__real_Angle            = 0
    real                    udg__real_Queue            = 0
    real                    udg__real_Head             = 0
    real                    udg__real_CurrentTime      = 0
    real                    udg__real_AngleSpread      = 0
    integer                 udg__int_Length            = 0
    real                    udg__real_Circonference    = 0
    real                    udg__real_Increment        = 0
    real                    udg_CPI                    = 0
    real                    udg_C2PI                   = 0
    unit                    udg__unit_Dummy            = null
    integer                 udg__int_Handle            = 0
    real                    udg__real_Range            = 0
    location                udg__point_Target          = null

    // Generated
    rect                    gg_rct_TownExitTarget      = null
    rect                    gg_rct_TownExitReady       = null
    rect                    gg_rct_Adv1                = null
    rect                    gg_rct_Adv2                = null
    rect                    gg_rct_StorageMagicBags    = null
    rect                    gg_rct_TownEntry           = null
    sound                   gg_snd_GLOBAL_START_GAME   = null
    sound                   gg_snd_GLOBAL_NEW_DAY      = null
    sound                   gg_snd_GLOBAL_ADVENTURE_START = null
    sound                   gg_snd_GLOBAL_ADVENTURE_FINISHED = null
    sound                   gg_snd_GLOBAL_PLAYER_READY = null
    sound                   gg_snd_GLOBAL_PLAYER_LEFT  = null
    sound                   gg_snd_GLOBAL_HINT         = null
    sound                   gg_snd_GLOBAL_EVENT_EPIC   = null
    string                  gg_snd_MUSIC_UNDEAD2
    string                  gg_snd_MUSIC_DARKAGENTS
    string                  gg_snd_MUSIC_HUMANVICTORY
    sound                   gg_snd_SPELL_FlashToStone  = null
    sound                   gg_snd_3D_ReceiveGold      = null
    sound                   gg_snd_SPELL_FlashToStoneAttacked = null
    trigger                 gg_trg_D__clencheur_sans_titre_003 = null
    trigger                 gg_trg_D__clencheur_sans_titre_001 = null
    trigger                 gg_trg_Initialization      = null
    trigger                 gg_trg_Constants           = null
    trigger                 gg_trg_Dummy_Dies          = null
    trigger                 gg_trg_Update_debug_mode   = null
    trigger                 gg_trg_Time                = null
    trigger                 gg_trg_Hints_Initialization = null
    trigger                 gg_trg_Hints               = null
    trigger                 gg_trg_Command_Parse       = null
    trigger                 gg_trg_Command_Launch      = null
    trigger                 gg_trg_Player_Ready        = null
    trigger                 gg_trg_Player_Not_Ready    = null
    trigger                 gg_trg_Check_If_All_Players_Ready = null
    trigger                 gg_trg_Object_Stacking     = null
    trigger                 gg_trg_Pickup_Gold         = null
    trigger                 gg_trg_Unique_Items_Initialization = null
    trigger                 gg_trg_Bags_Initialization = null
    trigger                 gg_trg_Bags_Equip          = null
    trigger                 gg_trg_Bags_Use_Magic_Bag  = null
    trigger                 gg_trg_Bags_Close_Magic_Bag = null
    trigger                 gg_trg_Players_Initialization = null
    trigger                 gg_trg_Player_Leaves       = null
    trigger                 gg_trg_Update_Active_Players = null
    trigger                 gg_trg_New_Day             = null
    trigger                 gg_trg_Update_Difficulty   = null
    trigger                 gg_trg_Debug_Dummy_Display_Order_Strings = null
    trigger                 gg_trg_Delete_Summoned_Dummy = null
    trigger                 gg_trg_Cast_Initialization = null
    trigger                 gg_trg_Cast_Begin          = null
    trigger                 gg_trg_Cast_Initiate       = null
    trigger                 gg_trg_Cast_Stop           = null
    trigger                 gg_trg_Projectile_Magique_Initialization = null
    trigger                 gg_trg_Projectile_Magique_Spell = null
    trigger                 gg_trg_Projectile_Magique_Tasks = null
    trigger                 gg_trg_AoE_Spells_Initialization = null
    trigger                 gg_trg_AoE_Spells_Spell    = null
    trigger                 gg_trg_AoE_Spells_Tasks    = null
    trigger                 gg_trg_Rayon_Spells_Initialization = null
    trigger                 gg_trg_Rayon_Spells_Spell  = null
    trigger                 gg_trg_Rayon_Spells_Tasks  = null
    trigger                 gg_trg_Cone_Spells_Initialization = null
    trigger                 gg_trg_Cone_Spells_Spell   = null
    trigger                 gg_trg_Cone_Spells_Tasks   = null
    trigger                 gg_trg_Cone_Spells_Spell_Stop = null
    trigger                 gg_trg_Renvoi_de_sorts_spell = null
    trigger                 gg_trg_Spells_Initialization = null
    trigger                 gg_trg_Spell_Hate          = null
    trigger                 gg_trg_Spell_Transmutation_de_la_chair_en_pierre = null
    trigger                 gg_trg_Spell_Transmutation_de_la_chair_en_pierre_Effects = null
    trigger                 gg_trg_Spell_Baies_nourricieres = null
    trigger                 gg_trg_Spawn_Select_Class  = null
    trigger                 gg_trg_Class_Selected      = null
    trigger                 gg_trg_Spell_Book_Initialization = null
    trigger                 gg_trg_Spell_Book_Learn_Scroll = null
    trigger                 gg_trg_Spell_Book_Learn_Scroll_Animation = null
    trigger                 gg_trg_Adventures_Metadata = null
    trigger                 gg_trg_Adventures_Initialization = null
    trigger                 gg_trg_Adventures_Cleanup_Previous = null
    trigger                 gg_trg_Adventures_Start_Next = null
    trigger                 gg_trg_Adventures_Restore_Markers = null
    trigger                 gg_trg_Adventures_Function_Spawn = null
    trigger                 gg_trg_Adventures_Boss_dead = null
    trigger                 gg_trg_Adventures_End      = null
    trigger                 gg_trg_Adventures_Back_To_Town = null
    trigger                 gg_trg_Adventures_Loot     = null
    trigger                 gg_trg_Adv01_Initialization = null
    trigger                 gg_trg_Adv02_Initialization = null
    unit                    gg_unit_n00E_0065          = null
endglobals

function InitGlobals takes nothing returns nothing
    local integer i = 0
    set udg_CHINTS_COUNT = 0
    set i = 0
    loop
        exitwhen (i > 5)
        set udg_CHINTS[i] = ""
        set i = i + 1
    endloop

    set udg__int1 = 0
    set udg__int2 = 0
    set udg_CPLAYERS_MAX = 20
    set udg_Difficulty_PlayersCount_Coeff = 0
    set udg_Players_Active = CreateForce()
    set udg_Difficulty_Time_Coeff = 0
    set udg_Difficulty_Coeff = 0
    set udg_Adventures_Count = 0
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Adventures_Title[i] = ""
        set i = i + 1
    endloop

    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Adventures_SpawnOrientation[i] = 0
        set i = i + 1
    endloop

    set udg_Adv_Cur_Index = 0
    set udg_Day = 0
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Adv_Cur_PowerCoeff[i] = 0
        set i = i + 1
    endloop

    set udg__real1 = 0
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Units_Angle[i] = 0
        set i = i + 1
    endloop

    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Adventures_Units_IndexMin[i] = 0
        set i = i + 1
    endloop

    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Adventures_Units_IndexMax[i] = 0
        set i = i + 1
    endloop

    set udg_Units_Count = 0
    set udg_Adv_Cur_RohalUnits = CreateGroup()
    set udg_Function_Spawn_UnitTypes_Count = 0
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Function_Spawn_PowerCoeff[i] = 0
        set i = i + 1
    endloop

    set udg_Function_Spawn_MinimumPower = 0
    set udg__Function_Spawn_CurrentPower = 0
    set udg_Players_TownReady = CreateForce()
    set udg_UniqueItems_Count = 0
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_UniqueItems_Available[i] = 0
        set i = i + 1
    endloop

    set udg_Spells_Count = 0
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_SpellClass_Name[i] = ""
        set i = i + 1
    endloop

    set udg_SpellClass_Count = 0
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Spells_Class[i] = 0
        set i = i + 1
    endloop

    set udg_CSPELLCLASS_EVOCATION = 2
    set udg_CSPELLCLASS_ABJURATION = 1
    set udg_CSPELLCLASS_INVOCATION = 3
    set udg_CSPELLCLASS_NECROMANCIE = 4
    set udg_CSPELLCLASS_TRANSMUTATION = 5
    set i = 0
    loop
        exitwhen (i > 1)
        set udg__stringarray1[i] = ""
        set i = i + 1
    endloop

    set udg__string1 = ""
    set udg_GamePar_Debug = false
    set udg__bool = false
    set udg_Time = CreateTimer()
    set udg_SpellMagicProj_Units = CreateGroup()
    set udg__int_NumberOfProjectiles = 0
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Spells_MaxLevel[i] = 0
        set i = i + 1
    endloop

    set udg__int_LevelOfSpell = 0
    set udg_SpellAoE_Instance = CreateGroup()
    set udg__int_Duration = 0
    set udg__real_Radius = 0
    set udg__bool_SpellCastOk = false
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_Bags_Slots[i] = 0
        set i = i + 1
    endloop

    set udg_Bags_Count = 0
    set udg_Players_Adventure = CreateForce()
    set udg_SpellFleshToStone_Units = CreateGroup()
    set i = 0
    loop
        exitwhen (i > 1)
        set udg_SpellAoE_DummySpell_Order[i] = ""
        set i = i + 1
    endloop

    set udg_SpellCone_Instance = CreateGroup()
    set udg__real_Time = 0
    set udg_SpellRayon_Instance = CreateGroup()
    set udg__real_Frequency = 0
    set udg__real_TimeEnd = 0
    set udg__real_Angle = 0
    set udg__real_Queue = 0
    set udg__real_Head = 0
    set udg__real_CurrentTime = 0
    set udg__real_AngleSpread = 0
    set udg__int_Length = 0
    set udg__real_Circonference = 0
    set udg__real_Increment = 0
    set udg_CPI = 3.14
    set udg_C2PI = 6.28
    set udg__int_Handle = 0
    set udg__real_Range = 0
endfunction

//***************************************************************************
//*
//*  Sounds
//*
//***************************************************************************

function InitSounds takes nothing returns nothing
    set gg_snd_GLOBAL_START_GAME = CreateSound( "Sound\\Interface\\ArrangedTeamInvitation.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_GLOBAL_START_GAME, "ArrangedTeamInvitation" )
    call SetSoundDuration( gg_snd_GLOBAL_START_GAME, 2914 )
    set gg_snd_GLOBAL_NEW_DAY = CreateSound( "Sound\\Interface\\ItemReceived.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_GLOBAL_NEW_DAY, "ItemReward" )
    call SetSoundDuration( gg_snd_GLOBAL_NEW_DAY, 1483 )
    set gg_snd_GLOBAL_ADVENTURE_START = CreateSound( "Sound\\Interface\\QuestNew.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_GLOBAL_ADVENTURE_START, "QuestNew" )
    call SetSoundDuration( gg_snd_GLOBAL_ADVENTURE_START, 3750 )
    set gg_snd_GLOBAL_ADVENTURE_FINISHED = CreateSound( "Sound\\Interface\\QuestCompleted.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_GLOBAL_ADVENTURE_FINISHED, "QuestCompleted" )
    call SetSoundDuration( gg_snd_GLOBAL_ADVENTURE_FINISHED, 5155 )
    set gg_snd_GLOBAL_PLAYER_READY = CreateSound( "Sound\\Interface\\MapPing.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_GLOBAL_PLAYER_READY, "MapPing" )
    call SetSoundDuration( gg_snd_GLOBAL_PLAYER_READY, 1637 )
    call SetSoundPitch( gg_snd_GLOBAL_PLAYER_READY, 1.2 )
    set gg_snd_GLOBAL_PLAYER_LEFT = CreateSound( "Sound\\Interface\\Warning.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_GLOBAL_PLAYER_LEFT, "Warning" )
    call SetSoundDuration( gg_snd_GLOBAL_PLAYER_LEFT, 1904 )
    set gg_snd_GLOBAL_HINT = CreateSound( "Sound\\Interface\\Hint.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_GLOBAL_HINT, "Hint" )
    call SetSoundDuration( gg_snd_GLOBAL_HINT, 2006 )
    set gg_snd_GLOBAL_EVENT_EPIC = CreateSound( "Sound\\Interface\\NewTournament.wav", false, false, false, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_GLOBAL_EVENT_EPIC, "NewTournament" )
    call SetSoundDuration( gg_snd_GLOBAL_EVENT_EPIC, 7988 )
    set gg_snd_MUSIC_UNDEAD2 = "Sound\\Music\\mp3Music\\Undead2.mp3"
    set gg_snd_MUSIC_DARKAGENTS = "Sound\\Music\\mp3Music\\DarkAgents.mp3"
    set gg_snd_MUSIC_HUMANVICTORY = "Sound\\Music\\mp3Music\\HumanVictory.mp3"
    set gg_snd_SPELL_FlashToStone = CreateSound( "Units\\Creeps\\RockGolem\\RockGolemDeath1.wav", false, true, true, 10, 10, "DefaultEAXON" )
    call SetSoundParamsFromLabel( gg_snd_SPELL_FlashToStone, "RockGolemDeath" )
    call SetSoundDuration( gg_snd_SPELL_FlashToStone, 2809 )
    set gg_snd_3D_ReceiveGold = CreateSound( "Abilities\\Spells\\Items\\ResourceItems\\ReceiveGold.wav", false, true, true, 10, 10, "SpellsEAX" )
    call SetSoundParamsFromLabel( gg_snd_3D_ReceiveGold, "ReceiveGold" )
    call SetSoundDuration( gg_snd_3D_ReceiveGold, 589 )
    set gg_snd_SPELL_FlashToStoneAttacked = CreateSound( "Sound\\Units\\Combat\\RockHeavyBashFlesh2.wav", false, true, true, 10, 10, "CombatSoundsEAX" )
    call SetSoundParamsFromLabel( gg_snd_SPELL_FlashToStoneAttacked, "RockHeavyBashFlesh" )
    call SetSoundDuration( gg_snd_SPELL_FlashToStoneAttacked, 929 )
endfunction

//***************************************************************************
//*
//*  Items
//*
//***************************************************************************

function CreateAllItems takes nothing returns nothing
    local integer itemID

    call CreateItem( 'I002', -1655.8, 4206.9 )
    call CreateItem( 'I003', -1437.6, -620.9 )
    call CreateItem( 'I003', 2845.2, 1171.2 )
    call CreateItem( 'I003', 2711.8, 1692.0 )
    call CreateItem( 'I003', 2911.7, 1759.3 )
    call CreateItem( 'I003', -2978.5, -3947.8 )
    call CreateItem( 'I003', -2847.4, -3754.1 )
    call CreateItem( 'I003', -994.8, -3871.9 )
    call CreateItem( 'I003', -3093.5, 812.5 )
    call CreateItem( 'I003', -1822.9, 933.0 )
    call CreateItem( 'I003', -2202.1, 3437.0 )
    call CreateItem( 'I003', -1820.2, 3218.6 )
    call CreateItem( 'I003', -1645.9, 920.2 )
    call CreateItem( 'I003', -2286.9, 4831.6 )
    call CreateItem( 'I003', -2654.7, 481.6 )
    call CreateItem( 'I003', -4000.0, 1434.8 )
    call CreateItem( 'I003', 412.6, -3298.7 )
    call CreateItem( 'I003', -676.8, -2284.0 )
    call CreateItem( 'I003', -4000.3, -2853.4 )
    call CreateItem( 'I003', 7071.7, 840.4 )
    call CreateItem( 'I003', -4137.2, -2785.9 )
    call CreateItem( 'I003', 4836.9, 492.0 )
    call CreateItem( 'I004', -2931.2, 2815.2 )
    call CreateItem( 'I005', -928.1, -2597.8 )
    call CreateItem( 'I005', -2895.8, 2816.7 )
    call CreateItem( 'I006', -3069.0, 2811.0 )
    call CreateItem( 'I007', -2978.4, 2814.0 )
    call CreateItem( 'I007', -4883.4, -2026.2 )
    call CreateItem( 'I008', -3023.7, 2810.1 )
    call CreateItem( 'I009', -3067.3, 2758.9 )
    call CreateItem( 'I00A', -3029.1, 2762.0 )
    call CreateItem( 'I00B', -3026.3, 2713.9 )
    call CreateItem( 'I00C', -2463.5, 2777.0 )
    call CreateItem( 'I00D', -2235.3, 2777.7 )
    call CreateItem( 'I00E', -2420.2, 2775.9 )
    call CreateItem( 'I00F', -2367.6, 2782.8 )
    call CreateItem( 'I00G', -2303.2, 2778.9 )
    call CreateItem( 'I00H', -2389.6, 2676.8 )
    call CreateItem( 'I00I', -2889.7, 2774.0 )
    call CreateItem( 'I00J', -2936.6, 2764.0 )
    call CreateItem( 'I00K', -3078.6, 2712.0 )
    call CreateItem( 'I00P', -3079.8, 2659.1 )
endfunction

//***************************************************************************
//*
//*  Unit Creation
//*
//***************************************************************************

//===========================================================================
function CreateBuildingsForPlayer21 takes nothing returns nothing
    local player p = Player(21)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set gg_unit_n00E_0065 = CreateUnit( p, 'n00E', -4480.0, 3520.0, 270.000 )
    set u = CreateUnit( p, 'hwtw', -3264.0, 1472.0, 270.000 )
    set u = CreateUnit( p, 'hwtw', -2944.0, 3392.0, 270.000 )
    set u = CreateUnit( p, 'hwtw', -1920.0, 1792.0, 270.000 )
    set u = CreateUnit( p, 'hwtw', -640.0, 2240.0, 270.000 )
    set u = CreateUnit( p, 'hwtw', -4160.0, 2496.0, 270.000 )
    set u = CreateUnit( p, 'hwtw', -3776.0, 3904.0, 270.000 )
endfunction

//===========================================================================
function CreateUnitsForPlayer21 takes nothing returns nothing
    local player p = Player(21)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'h004', -3141.9, 3638.9, 264.204 )
    set u = CreateUnit( p, 'h000', -3800.0, 2779.7, 328.139 )
    set u = CreateUnit( p, 'h003', -2305.6, 2344.7, 313.515 )
    set u = CreateUnit( p, 'h007', -3381.9, 1689.2, 97.529 )
    set u = CreateUnit( p, 'h00A', -2442.4, 3035.1, 235.940 )
endfunction

//===========================================================================
function CreateUnitsForPlayer23 takes nothing returns nothing
    local player p = Player(23)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'n005', -4533.4, -3532.2, 4.596 )
    set u = CreateUnit( p, 'n005', -2204.5, -2947.9, 153.590 )
    set u = CreateUnit( p, 'n002', -4356.0, -3910.4, 47.320 )
    set u = CreateUnit( p, 'n001', -3503.5, -1361.3, 133.460 )
    call UnitAddItemToSlotById( u, 'I007', 0 )
    set u = CreateUnit( p, 'n005', -1573.9, -2332.0, 212.024 )
    set u = CreateUnit( p, 'n00A', 779.8, -1387.5, 245.892 )
    set u = CreateUnit( p, 'n002', -4287.1, -2181.6, 82.021 )
    set u = CreateUnit( p, 'n000', -2799.8, -1917.7, 125.530 )
    call UnitAddItemToSlotById( u, 'I002', 0 )
    set u = CreateUnit( p, 'n000', -3358.1, -3131.8, 65.563 )
    set u = CreateUnit( p, 'n005', -968.2, -1587.9, 164.509 )
    set u = CreateUnit( p, 'n005', -829.9, -3304.9, 168.433 )
    set u = CreateUnit( p, 'n004', -1846.5, -900.5, 308.570 )
    set u = CreateUnit( p, 'n004', -565.4, -806.6, 247.628 )
    set u = CreateUnit( p, 'n003', 30.2, -2775.9, 220.396 )
    set u = CreateUnit( p, 'n00B', 2483.0, -5011.0, 257.706 )
    set u = CreateUnit( p, 'n005', 368.9, -1441.3, 259.679 )
    set u = CreateUnit( p, 'n005', 922.2, -1698.4, 197.947 )
    set u = CreateUnit( p, 'n00H', 917.0, -1970.7, 86.750 )
    set u = CreateUnit( p, 'n001', 3028.3, -4475.4, 271.750 )
    set u = CreateUnit( p, 'n001', 4267.6, -5288.7, 191.116 )
    set u = CreateUnit( p, 'n001', 6156.5, -5664.2, 162.570 )
    set u = CreateUnit( p, 'n001', 5613.1, -4247.2, 234.957 )
    set u = CreateUnit( p, 'n004', 2449.9, -3964.3, 347.426 )
    set u = CreateUnit( p, 'n001', 6845.1, -4927.7, 314.832 )
    set u = CreateUnit( p, 'n001', 7772.7, -4934.4, 222.759 )
    set u = CreateUnit( p, 'n001', 7346.1, -4205.0, 271.210 )
    set u = CreateUnit( p, 'n001', 7308.7, -2919.5, 267.614 )
    set u = CreateUnit( p, 'n004', 7155.7, -1280.5, 264.607 )
    set u = CreateUnit( p, 'n009', 7430.9, 567.3, 244.854 )
    set u = CreateUnit( p, 'n00A', 6309.8, 4094.4, 269.931 )
    set u = CreateUnit( p, 'n000', 5954.4, -3548.4, 66.152 )
    set u = CreateUnit( p, 'n001', 3614.8, -3429.6, 351.057 )
    set u = CreateUnit( p, 'n004', 2447.4, -1915.1, 45.737 )
    set u = CreateUnit( p, 'n004', 5741.0, -300.4, 285.237 )
    set u = CreateUnit( p, 'n001', 6011.3, -315.0, 259.240 )
    set u = CreateUnit( p, 'n007', 4808.1, 119.6, 186.681 )
    set u = CreateUnit( p, 'n001', 2746.5, -457.2, 300.475 )
    set u = CreateUnit( p, 'n008', 2265.8, 2701.8, 279.239 )
    set u = CreateUnit( p, 'n007', 809.5, 2262.3, 77.814 )
    set u = CreateUnit( p, 'n007', 3173.6, 4186.3, 237.554 )
    set u = CreateUnit( p, 'n006', 4307.0, 2762.8, 232.121 )
    set u = CreateUnit( p, 'n007', 3298.7, 1298.8, 88.247 )
    set u = CreateUnit( p, 'n001', 4436.8, 2528.6, 218.354 )
    set u = CreateUnit( p, 'n006', 6113.8, 1691.7, 199.958 )
    set u = CreateUnit( p, 'n001', 5528.9, 3310.7, 327.594 )
    set u = CreateUnit( p, 'n001', 6065.6, 1978.2, 207.449 )
    set u = CreateUnit( p, 'n001', 6071.5, 1432.5, 137.622 )
    set u = CreateUnit( p, 'n00H', 7015.1, 4449.5, 86.750 )
    set u = CreateUnit( p, 'n001', 3512.1, 1284.1, 104.544 )
    set u = CreateUnit( p, 'n001', 3120.5, 1278.0, 65.440 )
endfunction

//===========================================================================
function CreateNeutralPassive takes nothing returns nothing
    local player p = Player(PLAYER_NEUTRAL_PASSIVE)
    local unit u
    local integer unitID
    local trigger t
    local real life

    set u = CreateUnit( p, 'n00B', -4099.9, -884.7, 314.800 )
    call UnitAddItemToSlotById( u, 'I001', 0 )
    set u = CreateUnit( p, 'n001', 262.6, 581.5, 270.000 )
    set u = CreateUnit( p, 'n000', 265.8, 748.2, 270.000 )
    set u = CreateUnit( p, 'n002', 261.5, 999.2, 270.000 )
    set u = CreateUnit( p, 'n005', 563.9, 566.6, 270.000 )
    set u = CreateUnit( p, 'n004', 590.4, 741.6, 270.000 )
    set u = CreateUnit( p, 'n003', 593.4, 1006.8, 270.000 )
    set u = CreateUnit( p, 'n008', 899.6, 590.4, 270.000 )
    set u = CreateUnit( p, 'n009', 1235.7, 608.4, 270.000 )
    set u = CreateUnit( p, 'n00A', 1248.1, 990.4, 270.000 )
    set u = CreateUnit( p, 'n007', 916.2, 779.7, 270.000 )
    set u = CreateUnit( p, 'n006', 905.8, 998.2, 270.000 )
endfunction

//===========================================================================
function CreatePlayerBuildings takes nothing returns nothing
    call CreateBuildingsForPlayer21(  )
endfunction

//===========================================================================
function CreatePlayerUnits takes nothing returns nothing
    call CreateUnitsForPlayer21(  )
    call CreateUnitsForPlayer23(  )
endfunction

//===========================================================================
function CreateAllUnits takes nothing returns nothing
    call CreatePlayerBuildings(  )
    call CreateNeutralPassive(  )
    call CreatePlayerUnits(  )
endfunction

//***************************************************************************
//*
//*  Regions
//*
//***************************************************************************

function CreateRegions takes nothing returns nothing
    local weathereffect we

    set gg_rct_TownExitTarget = Rect( -640.0, 3584.0, -256.0, 3968.0 )
    set gg_rct_TownExitReady = Rect( -1152.0, 2560.0, 0.0, 4096.0 )
    set gg_rct_Adv1 = Rect( -5632.0, -4608.0, 1536.0, 0.0 )
    set gg_rct_Adv2 = Rect( 512.0, -6144.0, 8192.0, 5120.0 )
    set gg_rct_StorageMagicBags = Rect( -128.0, 512.0, 128.0, 1024.0 )
    set gg_rct_TownEntry = Rect( -1024.0, 1536.0, -768.0, 1792.0 )
endfunction

//***************************************************************************
//*
//*  Triggers
//*
//***************************************************************************

//===========================================================================
// Trigger: Déclencheur sans titre 003
//===========================================================================
function Trig_D__clencheur_sans_titre_003_Conditions takes nothing returns boolean
    if ( not ( GetRandomInt(1, 10) == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_D__clencheur_sans_titre_003_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_D__clencheur_sans_titre_003 takes nothing returns nothing
    set gg_trg_D__clencheur_sans_titre_003 = CreateTrigger(  )
    call TriggerAddCondition( gg_trg_D__clencheur_sans_titre_003, Condition( function Trig_D__clencheur_sans_titre_003_Conditions ) )
    call TriggerAddAction( gg_trg_D__clencheur_sans_titre_003, function Trig_D__clencheur_sans_titre_003_Actions )
endfunction

//===========================================================================
// Trigger: Déclencheur sans titre 001
//===========================================================================
function Trig_D__clencheur_sans_titre_001_Actions takes nothing returns nothing
    set udg__ability1 = GetSpellAbilityId()
endfunction

//===========================================================================
function InitTrig_D__clencheur_sans_titre_001 takes nothing returns nothing
    set gg_trg_D__clencheur_sans_titre_001 = CreateTrigger(  )
    call TriggerAddAction( gg_trg_D__clencheur_sans_titre_001, function Trig_D__clencheur_sans_titre_001_Actions )
endfunction

//===========================================================================
// Trigger: Initialization
//===========================================================================
function Trig_Initialization_Func010Func003001001001001 takes nothing returns boolean
    return ( GetPlayerController(GetFilterPlayer()) == MAP_CONTROL_USER )
endfunction

function Trig_Initialization_Func010Func003001001001002 takes nothing returns boolean
    return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Initialization_Func010Func003001001001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Initialization_Func010Func003001001001001(), Trig_Initialization_Func010Func003001001001002() )
endfunction

function Trig_Initialization_Func010C takes nothing returns boolean
    if ( not ( CountPlayersInForceBJ(GetPlayersMatching(Condition(function Trig_Initialization_Func010Func003001001001))) == 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Initialization_Actions takes nothing returns nothing
    call FogEnableOn(  )
    call FogMaskEnableOn(  )
    call SetTimeOfDayScalePercentBJ( 100.00 )
    call SetTimeOfDay( 8.00 )
    call UseTimeOfDayBJ( true )
    call SetCreepCampFilterState( false )
    call EnableMinimapFilterButtons( true, false )
    call PlayMusicBJ( gg_snd_MUSIC_HUMANVICTORY )
    // Debug
    if ( Trig_Initialization_Func010C() ) then
        call DisplayTimedTextToForce( GetPlayersAll(), 10.00, "TRIGSTR_434" )
        set udg_GamePar_Debug = true
    else
    endif
    call TriggerExecute( gg_trg_Update_debug_mode )
endfunction

//===========================================================================
function InitTrig_Initialization takes nothing returns nothing
    set gg_trg_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Initialization, function Trig_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Constants
//===========================================================================
function Trig_Constants_Actions takes nothing returns nothing
    set udg_CPOINT_BASE = GetRectCenter(gg_rct_TownEntry)
endfunction

//===========================================================================
function InitTrig_Constants takes nothing returns nothing
    set gg_trg_Constants = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Constants, function Trig_Constants_Actions )
endfunction

//===========================================================================
// Trigger: Dummy Dies
//===========================================================================
function Trig_Dummy_Dies_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) == 'h001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Dummy_Dies_Actions takes nothing returns nothing
    call RemoveUnit( GetTriggerUnit() )
endfunction

//===========================================================================
function InitTrig_Dummy_Dies takes nothing returns nothing
    set gg_trg_Dummy_Dies = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Dummy_Dies, EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Dummy_Dies, Condition( function Trig_Dummy_Dies_Conditions ) )
    call TriggerAddAction( gg_trg_Dummy_Dies, function Trig_Dummy_Dies_Actions )
endfunction

//===========================================================================
// Trigger: Update debug mode
//===========================================================================
function Trig_Update_debug_mode_Func001C takes nothing returns boolean
    if ( not ( udg_GamePar_Debug == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Update_debug_mode_Actions takes nothing returns nothing
    if ( Trig_Update_debug_mode_Func001C() ) then
        call CreateTimerDialogBJ( udg_Time, "TRIGSTR_437" )
        set udg_Time_Window = GetLastCreatedTimerDialogBJ()
        call TimerDialogDisplayBJ( true, udg_Time_Window )
    else
        call TimerDialogDisplayBJ( false, udg_Time_Window )
    endif
endfunction

//===========================================================================
function InitTrig_Update_debug_mode takes nothing returns nothing
    set gg_trg_Update_debug_mode = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Update_debug_mode, function Trig_Update_debug_mode_Actions )
endfunction

//===========================================================================
// Trigger: Time
//===========================================================================
function Trig_Time_Actions takes nothing returns nothing
    call StartTimerBJ( udg_Time, false, 86400.00 )
    call TriggerExecute( gg_trg_Update_debug_mode )
endfunction

//===========================================================================
function InitTrig_Time takes nothing returns nothing
    set gg_trg_Time = CreateTrigger(  )
    call TriggerRegisterTimerEventSingle( gg_trg_Time, 1.00 )
    call TriggerAddAction( gg_trg_Time, function Trig_Time_Actions )
endfunction

//===========================================================================
// Trigger: Hints Initialization
//===========================================================================
function Trig_Hints_Initialization_Func005002001001001001001 takes nothing returns boolean
    return ( GetPlayerController(GetFilterPlayer()) == MAP_CONTROL_USER )
endfunction

function Trig_Hints_Initialization_Func005002001001001001002 takes nothing returns boolean
    return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Hints_Initialization_Func005002001001001001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Hints_Initialization_Func005002001001001001001(), Trig_Hints_Initialization_Func005002001001001001002() )
endfunction

function Trig_Hints_Initialization_Actions takes nothing returns nothing
    set udg_CHINTS[1] = "A leur récupération, les pièces d'or sont réparties équitablement entre les joueurs. Pas besoin de se ruer dessus au péril de sa vie donc..."
    set udg_CHINTS[2] = "Un magicien généraliste peut utiliser toutes les classes de sortilèges MAIS [INSERT MALUS HERE]"
    set udg_CHINTS[3] = "Lorsque vous êtes prêts à partir pour la prochaine aventure, placez-vous vers l'extérieur du village."
    set udg_CHINTS[4] = "|c00ff4040Cromwell|r peut assembler des fragments d'objets pour reconstituer de légendaires artefacts."
    set udg_CHINTS[5] = ( GetPlayerName(ForcePickRandomPlayer(GetPlayersMatching(Condition(function Trig_Hints_Initialization_Func005002001001001001)))) + " a un petit zizi !" )
    set udg_CHINTS[6] = "Si vous mourrez, vos coéquipiers peuvent récupérer vos objets. Toutefois, vous perdrez votre argent et votre expérience. Soyez prudents !"
    set udg_CHINTS_COUNT = 6
endfunction

//===========================================================================
function InitTrig_Hints_Initialization takes nothing returns nothing
    set gg_trg_Hints_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Hints_Initialization, function Trig_Hints_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Hints
//===========================================================================
function Trig_Hints_Actions takes nothing returns nothing
    call PlaySoundBJ( gg_snd_GLOBAL_HINT )
    set udg__int1 = GetRandomInt(1, udg_CHINTS_COUNT)
    call DisplayTimedTextToForce( GetPlayersAll(), 15.00, ( "|cffff4040Astuce " + ( I2S(udg__int1) + ( " :|r " + udg_CHINTS[udg__int1] ) ) ) )
endfunction

//===========================================================================
function InitTrig_Hints takes nothing returns nothing
    set gg_trg_Hints = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Hints, 90.00 )
    call TriggerAddAction( gg_trg_Hints, function Trig_Hints_Actions )
endfunction

//===========================================================================
// Trigger: Command Parse
//===========================================================================
function Trig_Command_Parse_Func004Func001Func001C takes nothing returns boolean
    if ( not ( SubStringBJ(udg__string1, GetForLoopIndexA(), GetForLoopIndexA()) == " " ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Parse_Func004C takes nothing returns boolean
    if ( not ( SubStringBJ(udg__string1, 1, 1) == "-" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Parse_Actions takes nothing returns nothing
    set udg__int1 = 0
    set udg__int2 = 2
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = 8
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        set udg__stringarray1[GetForLoopIndexA()] = ""
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
    if ( Trig_Command_Parse_Func004C() ) then
        set bj_forLoopAIndex = 2
        set bj_forLoopAIndexEnd = StringLength(udg__string1)
        loop
            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
            if ( Trig_Command_Parse_Func004Func001Func001C() ) then
                set udg__stringarray1[udg__int1] = SubStringBJ(udg__string1, udg__int2, ( GetForLoopIndexA() - 1 ))
                set udg__stringarray1[udg__int1] = StringCase(udg__stringarray1[udg__int1], false)
                set udg__int1 = ( udg__int1 + 1 )
                set udg__int2 = ( GetForLoopIndexA() + 1 )
            else
            endif
            set bj_forLoopAIndex = bj_forLoopAIndex + 1
        endloop
        set udg__stringarray1[udg__int1] = SubStringBJ(udg__string1, udg__int2, StringLength(udg__string1))
    else
    endif
endfunction

//===========================================================================
function InitTrig_Command_Parse takes nothing returns nothing
    set gg_trg_Command_Parse = CreateTrigger(  )
    call DisableTrigger( gg_trg_Command_Parse )
    call TriggerAddAction( gg_trg_Command_Parse, function Trig_Command_Parse_Actions )
endfunction

//===========================================================================
// Trigger: Command Launch
//===========================================================================
function Trig_Command_Launch_Func004C takes nothing returns boolean
    if ( not ( udg__stringarray1[0] == "clear" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func006Func001C takes nothing returns boolean
    if ( not ( udg__stringarray1[2] == "true" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func006Func003C takes nothing returns boolean
    if ( not ( udg__stringarray1[1] == "debug" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func006Func005Func001C takes nothing returns boolean
    if ( not ( udg__bool == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func006Func005C takes nothing returns boolean
    if ( not ( udg__stringarray1[1] == "orders" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func006C takes nothing returns boolean
    if ( not ( udg__stringarray1[0] == "set" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func008C takes nothing returns boolean
    if ( not ( udg__stringarray1[0] == "next" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func010Func002C takes nothing returns boolean
    if ( not ( udg__int1 > 0 ) ) then
        return false
    endif
    if ( not ( udg__int1 <= udg_Adventures_Count ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func010C takes nothing returns boolean
    if ( not ( udg__stringarray1[0] == "run" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func012Func001Func002C takes nothing returns boolean
    if ( not ( udg__stringarray1[1] == "true" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func012C takes nothing returns boolean
    if ( not ( udg__stringarray1[0] == "control" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func014Func002C takes nothing returns boolean
    if ( not ( udg__real1 >= 100.00 ) ) then
        return false
    endif
    if ( not ( udg__real1 <= 3000.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func014C takes nothing returns boolean
    if ( not ( udg__stringarray1[0] == "zoom" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func016Func001C takes nothing returns boolean
    if ( not ( udg__stringarray1[1] == "list" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func016Func003Func002Func005Func003C takes nothing returns boolean
    if ( not ( udg__int_LevelOfSpell > 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func016Func003Func002Func005C takes nothing returns boolean
    if ( not ( udg__int_LevelOfSpell <= udg_Spells_MaxLevel[udg__int1] ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func016Func003Func002C takes nothing returns boolean
    if ( not ( udg__int1 >= 1 ) ) then
        return false
    endif
    if ( not ( udg__int1 <= udg_Spells_Count ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func016Func003C takes nothing returns boolean
    if ( not ( udg__stringarray1[1] == "learn" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func016C takes nothing returns boolean
    if ( not ( udg__stringarray1[0] == "spell" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Func018C takes nothing returns boolean
    if ( not ( udg__stringarray1[0] == "adventures" ) ) then
        return false
    endif
    return true
endfunction

function Trig_Command_Launch_Actions takes nothing returns nothing
    set udg__string1 = GetEventPlayerChatString()
    call TriggerExecute( gg_trg_Command_Parse )
    // clear
    if ( Trig_Command_Launch_Func004C() ) then
        call DisableTrigger( gg_trg_Debug_Dummy_Display_Order_Strings )
        call ClearTextMessagesBJ( GetForceOfPlayer(GetTriggerPlayer()) )
    else
    endif
    // set <param> <value>
    if ( Trig_Command_Launch_Func006C() ) then
        if ( Trig_Command_Launch_Func006Func001C() ) then
            set udg__bool = true
        else
            set udg__bool = false
        endif
        // Enable/Disable Debug Mode
        if ( Trig_Command_Launch_Func006Func003C() ) then
            call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "Modification du paramètre de jeu : Mode débug = " + udg__stringarray1[2] ) )
            set udg_GamePar_Debug = udg__bool
            call TriggerExecute( gg_trg_Update_debug_mode )
            return
        else
        endif
        // Enable/Disable Debug Mode
        if ( Trig_Command_Launch_Func006Func005C() ) then
            if ( Trig_Command_Launch_Func006Func005Func001C() ) then
                call EnableTrigger( gg_trg_Debug_Dummy_Display_Order_Strings )
            else
                call DisableTrigger( gg_trg_Debug_Dummy_Display_Order_Strings )
            endif
            call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "Modification du paramètre de jeu : Display dummy order strings = " + udg__stringarray1[2] ) )
            return
        else
        endif
    else
    endif
    // next [<index>]
    if ( Trig_Command_Launch_Func008C() ) then
        set udg_Adv_Cur_Index = S2I(udg__stringarray1[1])
        call TriggerExecute( gg_trg_Adventures_Start_Next )
        return
    else
    endif
    // run
    if ( Trig_Command_Launch_Func010C() ) then
        set udg__int1 = S2I(udg__stringarray1[1])
        if ( Trig_Command_Launch_Func010Func002C() ) then
            set udg_Adv_Cur_Index = udg__int1
            call TriggerExecute( udg_Adventures_TriggerInit[udg_Adv_Cur_Index] )
            return
        else
        endif
    else
    endif
    // control
    if ( Trig_Command_Launch_Func012C() ) then
        set bj_forLoopAIndex = 1
        set bj_forLoopAIndexEnd = 10
        loop
            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
            call DisplayTimedTextToForce( GetForceOfPlayer(GetTriggerPlayer()), 10.00, ( "Etat du partage d'unités : " + udg__stringarray1[1] ) )
            if ( Trig_Command_Launch_Func012Func001Func002C() ) then
                call SetPlayerAllianceBJ( ConvertedPlayer(GetForLoopIndexA()), ALLIANCE_SHARED_CONTROL, true, GetTriggerPlayer() )
            else
                call SetPlayerAllianceBJ( ConvertedPlayer(GetForLoopIndexA()), ALLIANCE_SHARED_CONTROL, false, GetTriggerPlayer() )
            endif
            set bj_forLoopAIndex = bj_forLoopAIndex + 1
        endloop
        return
    else
    endif
    // zoom
    if ( Trig_Command_Launch_Func014C() ) then
        set udg__real1 = S2R(udg__stringarray1[1])
        if ( Trig_Command_Launch_Func014Func002C() ) then
            call DisplayTimedTextToForce( GetForceOfPlayer(GetTriggerPlayer()), 10.00, ( "Modification de la valeur du zoom caméra : " + udg__stringarray1[1] ) )
            call SetCameraFieldForPlayer( GetTriggerPlayer(), CAMERA_FIELD_TARGET_DISTANCE, udg__real1, 1.00 )
        else
            call DisplayTimedTextToForce( GetForceOfPlayer(GetTriggerPlayer()), 10.00, "TRIGSTR_1380" )
        endif
        return
    else
    endif
    // spell
    if ( Trig_Command_Launch_Func016C() ) then
        if ( Trig_Command_Launch_Func016Func001C() ) then
            set bj_forLoopAIndex = 1
            set bj_forLoopAIndexEnd = udg_Spells_Count
            loop
                exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
                call DisplayTextToForce( GetForceOfPlayer(GetTriggerPlayer()), ( "Spell #" + ( I2S(GetForLoopIndexA()) + ( " - " + ( GetAbilityName(udg_Spells_Capacity[GetForLoopIndexA()]) + ( " - " + ( udg_SpellClass_Name[udg_Spells_Class[GetForLoopIndexA()]] + ( " - Niveaux : " + ( I2S(udg_Spells_MaxLevel[GetForLoopIndexA()]) + "" ) ) ) ) ) ) ) ) )
                set bj_forLoopAIndex = bj_forLoopAIndex + 1
            endloop
        else
        endif
        // Learn ?
        if ( Trig_Command_Launch_Func016Func003C() ) then
            set udg__int1 = S2I(udg__stringarray1[2])
            if ( Trig_Command_Launch_Func016Func003Func002C() ) then
                set udg__int_LevelOfSpell = S2I(udg__stringarray1[3])
                if ( Trig_Command_Launch_Func016Func003Func002Func005C() ) then
                    if ( Trig_Command_Launch_Func016Func003Func002Func005Func003C() ) then
                        call DisplayTimedTextToForce( GetForceOfPlayer(GetTriggerPlayer()), 10.00, ( "Adding spell #" + ( I2S(udg__int1) + ( " at level " + ( I2S(udg__int_LevelOfSpell) + ( "  for player " + GetPlayerName(GetTriggerPlayer()) ) ) ) ) ) )
                        call UnitAddAbilityBJ( udg_Spells_Capacity[udg__int1], udg_Characters[GetConvertedPlayerId(GetTriggerPlayer())] )
                        call SetUnitAbilityLevelSwapped( udg_Spells_Capacity[udg__int1], udg_Characters[GetConvertedPlayerId(GetTriggerPlayer())], udg__int_LevelOfSpell )
                    else
                        call UnitRemoveAbilityBJ( udg_Spells_Capacity[udg__int1], udg_Characters[GetConvertedPlayerId(GetTriggerPlayer())] )
                    endif
                else
                    call DisplayTimedTextToForce( GetForceOfPlayer(GetTriggerPlayer()), 10.00, ( "Maximum spell level : " + I2S(udg_Spells_MaxLevel[udg__int1]) ) )
                endif
            else
                call DisplayTimedTextToForce( GetForceOfPlayer(GetTriggerPlayer()), 10.00, ( "Try \"-spell list\". No such spell : #" + I2S(udg__int1) ) )
            endif
        else
        endif
        return
    else
    endif
    // adventures
    if ( Trig_Command_Launch_Func018C() ) then
        set bj_forLoopAIndex = 1
        set bj_forLoopAIndexEnd = udg_Adventures_Count
        loop
            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
            call DisplayTextToForce( GetForceOfPlayer(GetTriggerPlayer()), ( "Adventure #" + ( I2S(GetForLoopIndexA()) + ( " - " + udg_Adventures_Title[GetForLoopIndexA()] ) ) ) )
            call PingMinimapLocForForceEx( GetPlayersAll(), udg_Adventures_Spawn[GetForLoopIndexA()], 5.00, bj_MINIMAPPINGSTYLE_SIMPLE, 0.00, 0.00, 100 )
            set bj_forLoopAIndex = bj_forLoopAIndex + 1
        endloop
        return
    else
    endif
endfunction

//===========================================================================
function InitTrig_Command_Launch takes nothing returns nothing
    set gg_trg_Command_Launch = CreateTrigger(  )
    call DisableTrigger( gg_trg_Command_Launch )
    call TriggerRegisterPlayerChatEvent( gg_trg_Command_Launch, Player(0), "-", false )
    call TriggerAddAction( gg_trg_Command_Launch, function Trig_Command_Launch_Actions )
endfunction

//===========================================================================
// Trigger: Player Ready
//===========================================================================
function Trig_Player_Ready_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_Characters[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Ready_Actions takes nothing returns nothing
    call ForceAddPlayerSimple( GetOwningPlayer(GetTriggerUnit()), udg_Players_TownReady )
    set udg__point1 = GetRectCenter(gg_rct_TownExitTarget)
    call IssuePointOrderLocBJ( GetTriggerUnit(), "move", udg__point1 )
    call SelectUnitRemoveForPlayer( GetTriggerUnit(), GetOwningPlayer(GetTriggerUnit()) )
    call PlaySoundBJ( gg_snd_GLOBAL_PLAYER_READY )
    call RemoveLocation(udg__point1)
    call TriggerExecute( gg_trg_Check_If_All_Players_Ready )
endfunction

//===========================================================================
function InitTrig_Player_Ready takes nothing returns nothing
    set gg_trg_Player_Ready = CreateTrigger(  )
    call TriggerRegisterEnterRectSimple( gg_trg_Player_Ready, gg_rct_TownExitReady )
    call TriggerAddCondition( gg_trg_Player_Ready, Condition( function Trig_Player_Ready_Conditions ) )
    call TriggerAddAction( gg_trg_Player_Ready, function Trig_Player_Ready_Actions )
endfunction

//===========================================================================
// Trigger: Player Not Ready
//===========================================================================
function Trig_Player_Not_Ready_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_Characters[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))] ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Not_Ready_Actions takes nothing returns nothing
    call ForceRemovePlayerSimple( GetOwningPlayer(GetTriggerUnit()), udg_Players_TownReady )
endfunction

//===========================================================================
function InitTrig_Player_Not_Ready takes nothing returns nothing
    set gg_trg_Player_Not_Ready = CreateTrigger(  )
    call TriggerRegisterLeaveRectSimple( gg_trg_Player_Not_Ready, gg_rct_TownExitReady )
    call TriggerAddCondition( gg_trg_Player_Not_Ready, Condition( function Trig_Player_Not_Ready_Conditions ) )
    call TriggerAddAction( gg_trg_Player_Not_Ready, function Trig_Player_Not_Ready_Actions )
endfunction

//===========================================================================
// Trigger: Check If All Players Ready
//
// Check if every player is ready for the next adventure
//===========================================================================
function Trig_Check_If_All_Players_Ready_Func001Func003001001001 takes nothing returns boolean
    return ( IsPlayerInForce(GetFilterPlayer(), udg_Players_Active) == true )
endfunction

function Trig_Check_If_All_Players_Ready_Func001Func003001001002 takes nothing returns boolean
    return ( IsPlayerInForce(GetFilterPlayer(), udg_Players_TownReady) == false )
endfunction

function Trig_Check_If_All_Players_Ready_Func001Func003001001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Check_If_All_Players_Ready_Func001Func003001001001(), Trig_Check_If_All_Players_Ready_Func001Func003001001002() )
endfunction

function Trig_Check_If_All_Players_Ready_Func001Func003A takes nothing returns nothing
    call DisplayTimedTextToForce( GetForceOfPlayer(GetEnumPlayer()), 10.00, "TRIGSTR_259" )
    call PingMinimapLocForForceEx( GetForceOfPlayer(GetEnumPlayer()), udg__point1, 1, bj_MINIMAPPINGSTYLE_SIMPLE, 100, 100.00, 25.00 )
endfunction

function Trig_Check_If_All_Players_Ready_Func001C takes nothing returns boolean
    if ( not ( CountPlayersInForceBJ(udg_Players_TownReady) >= CountPlayersInForceBJ(udg_Players_Active) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Check_If_All_Players_Ready_Actions takes nothing returns nothing
    if ( Trig_Check_If_All_Players_Ready_Func001C() ) then
        set udg_Adv_Cur_Index = 0
        call TriggerExecute( gg_trg_Adventures_Start_Next )
    else
        // Notify players not ready
        call ForForce( GetPlayersMatching(Condition(function Trig_Check_If_All_Players_Ready_Func001Func003001001)), function Trig_Check_If_All_Players_Ready_Func001Func003A )
    endif
endfunction

//===========================================================================
function InitTrig_Check_If_All_Players_Ready takes nothing returns nothing
    set gg_trg_Check_If_All_Players_Ready = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Check_If_All_Players_Ready, function Trig_Check_If_All_Players_Ready_Actions )
endfunction

//===========================================================================
// Trigger: Object Stacking
//===========================================================================
function Trig_Object_Stacking_Conditions takes nothing returns boolean
    if ( not ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_CHARGED ) ) then
        return false
    endif
    return true
endfunction

function Trig_Object_Stacking_Func001Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) == GetItemTypeId(GetManipulatedItem()) ) ) then
        return false
    endif
    if ( not ( UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA()) != GetManipulatedItem() ) ) then
        return false
    endif
    return true
endfunction

function Trig_Object_Stacking_Actions takes nothing returns nothing
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = 6
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Object_Stacking_Func001Func001C() ) then
            call SetItemCharges( UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA()), ( GetItemCharges(GetManipulatedItem()) + GetItemCharges(UnitItemInSlotBJ(GetTriggerUnit(), GetForLoopIndexA())) ) )
            call RemoveItem( GetManipulatedItem() )
            return
        else
        endif
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Object_Stacking takes nothing returns nothing
    set gg_trg_Object_Stacking = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Object_Stacking, EVENT_PLAYER_UNIT_PICKUP_ITEM )
    call TriggerAddCondition( gg_trg_Object_Stacking, Condition( function Trig_Object_Stacking_Conditions ) )
    call TriggerAddAction( gg_trg_Object_Stacking, function Trig_Object_Stacking_Actions )
endfunction

//===========================================================================
// Trigger: Pickup Gold
//
// The number of gold pieces of an item is the custom value of it (via Item - Set custom value), or 1 if not specified.
//===========================================================================
function Trig_Pickup_Gold_Conditions takes nothing returns boolean
    if ( not ( GetItemTypeId(GetManipulatedItem()) == 'I003' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Pickup_Gold_Func005Func001C takes nothing returns boolean
    if ( not ( GetOwningPlayer(GetTriggerUnit()) != GetEnumPlayer() ) ) then
        return false
    endif
    return true
endfunction

function Trig_Pickup_Gold_Func005A takes nothing returns nothing
    if ( Trig_Pickup_Gold_Func005Func001C() ) then
        call AdjustPlayerStateBJ( udg__int2, GetEnumPlayer(), PLAYER_STATE_RESOURCE_GOLD )
    else
    endif
endfunction

function Trig_Pickup_Gold_Actions takes nothing returns nothing
    set udg__int1 = IMaxBJ(1, GetItemUserData(GetManipulatedItem()))
    set udg__int2 = ( udg__int1 / CountPlayersInForceBJ(udg_Players_Active) )
    set udg__int1 = ( udg__int2 + ModuloInteger(udg__int1, CountPlayersInForceBJ(udg_Players_Active)) )
    call AdjustPlayerStateBJ( udg__int1, GetOwningPlayer(GetTriggerUnit()), PLAYER_STATE_RESOURCE_GOLD )
    call ForForce( udg_Players_Active, function Trig_Pickup_Gold_Func005A )
    set udg__point1 = GetUnitLoc(GetTriggerUnit())
    call AddSpecialEffectLocBJ( udg__point1, "Abilities\\Spells\\Items\\ResourceItems\\ResourceEffectTarget.mdl" )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
    call CreateTextTagLocBJ( ( "+" + I2S(udg__int1) ), udg__point1, 0, 8.00, 100, 100, 0.00, 0 )
    call SetTextTagVelocityBJ( GetLastCreatedTextTag(), 64, 90 )
    call SetTextTagLifespanBJ( GetLastCreatedTextTag(), 3.00 )
    call SetTextTagFadepointBJ( GetLastCreatedTextTag(), 2.00 )
    call SetTextTagPermanentBJ( GetLastCreatedTextTag(), false )
    call PlaySoundAtPointBJ( gg_snd_3D_ReceiveGold, 100, udg__point1, 50.00 )
    call RemoveLocation(udg__point1)
    call RemoveItem( GetManipulatedItem() )
endfunction

//===========================================================================
function InitTrig_Pickup_Gold takes nothing returns nothing
    set gg_trg_Pickup_Gold = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Pickup_Gold, EVENT_PLAYER_UNIT_PICKUP_ITEM )
    call TriggerAddCondition( gg_trg_Pickup_Gold, Condition( function Trig_Pickup_Gold_Conditions ) )
    call TriggerAddAction( gg_trg_Pickup_Gold, function Trig_Pickup_Gold_Actions )
endfunction

//===========================================================================
// Trigger: Unique Items Initialization
//===========================================================================
function Trig_Unique_Items_Initialization_Actions takes nothing returns nothing
    set udg_UniqueItems_Count = 0
    // -
    set udg_UniqueItems_Count = ( udg_UniqueItems_Count + 1 )
    set udg_UniqueItems_Available[udg_UniqueItems_Count] = 1
    set udg_UniqueItems_Instance[udg_UniqueItems_Count] = null
    set udg_UniqueItems_Type[udg_UniqueItems_Count] = 'I001'
    // -
endfunction

//===========================================================================
function InitTrig_Unique_Items_Initialization takes nothing returns nothing
    set gg_trg_Unique_Items_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Unique_Items_Initialization, function Trig_Unique_Items_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Bags Initialization
//===========================================================================
function Trig_Bags_Initialization_Actions takes nothing returns nothing
    // Magic Bags Data
    call InitHashtableBJ(  )
    set udg_Bags_MagicBags_Data = GetLastCreatedHashtableBJ()
    // -
    set udg_Bags_ItemType[1] = 'I00C'
    set udg_Bags_Slots[1] = 2
    // -
    set udg_Bags_ItemType[2] = 'I00E'
    set udg_Bags_Slots[2] = 3
    // -
    set udg_Bags_ItemType[3] = 'I00F'
    set udg_Bags_Slots[3] = 4
    // -
    set udg_Bags_ItemType[4] = 'I00G'
    set udg_Bags_Slots[4] = 5
    // -
    set udg_Bags_ItemType[5] = 'I00D'
    set udg_Bags_Slots[5] = 6
    // -
    set udg_Bags_Count = 5
endfunction

//===========================================================================
function InitTrig_Bags_Initialization takes nothing returns nothing
    set gg_trg_Bags_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Bags_Initialization, function Trig_Bags_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Bags Equip
//===========================================================================
function Trig_Bags_Equip_Conditions takes nothing returns boolean
    if ( not ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_PERMANENT ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bags_Equip_Func002Func001Func004C takes nothing returns boolean
    if ( not ( udg__int_LevelOfSpell > 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bags_Equip_Func002Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetManipulatedItem()) == udg_Bags_ItemType[GetForLoopIndexA()] ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bags_Equip_Actions takes nothing returns nothing
    // Search in the spell book if this is a known spell scroll
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = udg_Bags_Count
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Bags_Equip_Func002Func001C() ) then
            set udg__int_LevelOfSpell = GetUnitAbilityLevelSwapped('A00J', GetTriggerUnit())
            call SetUnitAbilityLevelSwapped( 'A00J', GetTriggerUnit(), udg_Bags_Slots[GetForLoopIndexA()] )
            call DisplayTimedTextToForce( GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())), 10.00, ( "Vous venez d'équiper le sac : " + ( GetItemName(GetManipulatedItem()) + ( ". Nombre d'emplacements : " + I2S(udg_Bags_Slots[GetForLoopIndexA()]) ) ) ) )
            if ( Trig_Bags_Equip_Func002Func001Func004C() ) then
                call UnitAddItemByIdSwapped( udg_Bags_ItemType[( udg__int_LevelOfSpell - 1 )], GetTriggerUnit() )
            else
            endif
            return
        else
        endif
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Bags_Equip takes nothing returns nothing
    set gg_trg_Bags_Equip = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Bags_Equip, EVENT_PLAYER_UNIT_USE_ITEM )
    call TriggerAddCondition( gg_trg_Bags_Equip, Condition( function Trig_Bags_Equip_Conditions ) )
    call TriggerAddAction( gg_trg_Bags_Equip, function Trig_Bags_Equip_Actions )
endfunction

//===========================================================================
// Trigger: Bags Use Magic Bag
//===========================================================================
function Trig_Bags_Use_Magic_Bag_Conditions takes nothing returns boolean
    if ( not ( GetItemTypeId(GetManipulatedItem()) == 'I00H' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bags_Use_Magic_Bag_Func003C takes nothing returns boolean
    if ( not ( udg__unit1 == null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bags_Use_Magic_Bag_Func004C takes nothing returns boolean
    if ( not ( GetOwningPlayer(udg__unit1) == GetOwningPlayer(GetTriggerUnit()) ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bags_Use_Magic_Bag_Actions takes nothing returns nothing
    set udg__unit1 = LoadUnitHandleBJ(0, GetHandleIdBJ(GetManipulatedItem()), udg_Bags_MagicBags_Data)
    set udg__point1 = GetUnitLoc(GetTriggerUnit())
    if ( Trig_Bags_Use_Magic_Bag_Func003C() ) then
        call CreateNUnitsAtLoc( 1, 'h008', Player(PLAYER_NEUTRAL_PASSIVE), udg__point1, bj_UNIT_FACING )
        call SetUnitAbilityLevelSwapped( 'A00J', GetLastCreatedUnit(), 6 )
        set udg__unit1 = GetLastCreatedUnit()
        call SaveUnitHandleBJ( GetLastCreatedUnit(), 0, GetHandleIdBJ(GetTriggerUnit()), udg_Bags_MagicBags_Data )
    else
    endif
    if ( Trig_Bags_Use_Magic_Bag_Func004C() ) then
        // Refermer le sac
        set udg__point2 = GetRectCenter(gg_rct_StorageMagicBags)
        call SetUnitOwner( udg__unit1, Player(PLAYER_NEUTRAL_PASSIVE), false )
        call SelectUnitForPlayerSingle( udg_Characters[GetConvertedPlayerId(GetOwningPlayer(GetTriggerUnit()))], GetOwningPlayer(GetTriggerUnit()) )
    else
        // Ouvrir le sac
        set udg__point2 = PolarProjectionBJ(udg__point1, 64.00, GetUnitFacing(GetTriggerUnit()))
        call SetUnitOwner( udg__unit1, GetOwningPlayer(GetTriggerUnit()), false )
        call SelectUnitForPlayerSingle( udg__unit1, GetOwningPlayer(GetTriggerUnit()) )
        call PanCameraToTimedLocForPlayer( GetOwningPlayer(GetTriggerUnit()), udg__point2, 0 )
    endif
    call SetUnitPositionLocFacingLocBJ( udg__unit1, udg__point2, udg__point1 )
    call RemoveLocation(udg__point1)
    call RemoveLocation(udg__point2)
endfunction

//===========================================================================
function InitTrig_Bags_Use_Magic_Bag takes nothing returns nothing
    set gg_trg_Bags_Use_Magic_Bag = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Bags_Use_Magic_Bag, EVENT_PLAYER_UNIT_USE_ITEM )
    call TriggerAddCondition( gg_trg_Bags_Use_Magic_Bag, Condition( function Trig_Bags_Use_Magic_Bag_Conditions ) )
    call TriggerAddAction( gg_trg_Bags_Use_Magic_Bag, function Trig_Bags_Use_Magic_Bag_Actions )
endfunction

//===========================================================================
// Trigger: Bags Close Magic Bag
//
// TODO
//===========================================================================
function Trig_Bags_Close_Magic_Bag_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00M' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Bags_Close_Magic_Bag_Actions takes nothing returns nothing
endfunction

//===========================================================================
function InitTrig_Bags_Close_Magic_Bag takes nothing returns nothing
    set gg_trg_Bags_Close_Magic_Bag = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Bags_Close_Magic_Bag, EVENT_PLAYER_UNIT_SPELL_CAST )
    call TriggerAddCondition( gg_trg_Bags_Close_Magic_Bag, Condition( function Trig_Bags_Close_Magic_Bag_Conditions ) )
    call TriggerAddAction( gg_trg_Bags_Close_Magic_Bag, function Trig_Bags_Close_Magic_Bag_Actions )
endfunction

//===========================================================================
// Trigger: Players Initialization
//
// 1 - Hôte
// 2-20 - Joueurs
// 21 - Non spécifié
// 22 - Colons
// 23 - Rohal (Neutre)
// 24 - Rohal (Hostile)
//===========================================================================
function Trig_Players_Initialization_Actions takes nothing returns nothing
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = 20
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call SetPlayerAllianceStateBJ( ConvertedPlayer(GetForLoopIndexA()), Player(21), bj_ALLIANCE_ALLIED )
        call SetPlayerAllianceStateBJ( ConvertedPlayer(GetForLoopIndexA()), Player(22), bj_ALLIANCE_NEUTRAL )
        call SetPlayerAllianceStateBJ( ConvertedPlayer(GetForLoopIndexA()), Player(23), bj_ALLIANCE_UNALLIED )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Players_Initialization takes nothing returns nothing
    set gg_trg_Players_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Players_Initialization, function Trig_Players_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Player Leaves
//===========================================================================
function Trig_Player_Leaves_Func004C takes nothing returns boolean
    if ( not ( udg__int1 > 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Player_Leaves_Actions takes nothing returns nothing
    call PlaySoundBJ( gg_snd_GLOBAL_PLAYER_LEFT )
    call DisplayTimedTextToForce( udg_Players_Active, 20.00, ( GetPlayerName(GetTriggerPlayer()) + " a quitté la partie !" ) )
    set udg__int1 = GetPlayerState(GetTriggerPlayer(), PLAYER_STATE_RESOURCE_GOLD)
    if ( Trig_Player_Leaves_Func004C() ) then
        call DisplayTimedTextToForce( udg_Players_Active, 20.00, ( I2S(udg__int1) + " PO répartis entre les joueurs." ) )
    else
    endif
    call TriggerExecute( gg_trg_Update_Active_Players )
endfunction

//===========================================================================
function InitTrig_Player_Leaves takes nothing returns nothing
    set gg_trg_Player_Leaves = CreateTrigger(  )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(0) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(1) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(2) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(3) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(4) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(5) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(6) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(7) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(8) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(9) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(10) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(11) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(12) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(13) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(14) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(15) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(16) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(17) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(18) )
    call TriggerRegisterPlayerEventLeave( gg_trg_Player_Leaves, Player(19) )
    call TriggerAddAction( gg_trg_Player_Leaves, function Trig_Player_Leaves_Actions )
endfunction

//===========================================================================
// Trigger: Update Active Players
//===========================================================================
function Trig_Update_Active_Players_Func001002001001 takes nothing returns boolean
    return ( GetPlayerController(GetFilterPlayer()) == MAP_CONTROL_USER )
endfunction

function Trig_Update_Active_Players_Func001002001002 takes nothing returns boolean
    return ( GetPlayerSlotState(GetFilterPlayer()) == PLAYER_SLOT_STATE_PLAYING )
endfunction

function Trig_Update_Active_Players_Func001002001 takes nothing returns boolean
    return GetBooleanAnd( Trig_Update_Active_Players_Func001002001001(), Trig_Update_Active_Players_Func001002001002() )
endfunction

function Trig_Update_Active_Players_Actions takes nothing returns nothing
    set udg_Players_Active = GetPlayersMatching(Condition(function Trig_Update_Active_Players_Func001002001))
    call TriggerExecute( gg_trg_Update_Difficulty )
endfunction

//===========================================================================
function InitTrig_Update_Active_Players takes nothing returns nothing
    set gg_trg_Update_Active_Players = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Update_Active_Players, function Trig_Update_Active_Players_Actions )
endfunction

//===========================================================================
// Trigger: New Day
//===========================================================================
function Trig_New_Day_Actions takes nothing returns nothing
    set udg_Day = ( udg_Day + 1 )
    call DisplayTimedTextToForce( GetPlayersAll(), 15.00, ( "|c00ff4040Jour " + I2S(udg_Day) ) )
    call PlaySoundBJ( gg_snd_GLOBAL_NEW_DAY )
    call TriggerExecute( gg_trg_Update_Difficulty )
endfunction

//===========================================================================
function InitTrig_New_Day takes nothing returns nothing
    set gg_trg_New_Day = CreateTrigger(  )
    call TriggerRegisterGameStateEventTimeOfDay( gg_trg_New_Day, EQUAL, 8.00 )
    call TriggerAddAction( gg_trg_New_Day, function Trig_New_Day_Actions )
endfunction

//===========================================================================
// Trigger: Update Difficulty
//
// ======== Difficulty Coefficient ========
// 0.5 = Normal difficulty for half players OR Monsters twice easier for all players
// 1.0 = Normal difficulty with all players
// 2.0 = Ennemies are twice harder to beat with all players
// ======== Compute details ========
// Difficulty = Coeff (Player count) * Coeff (Day)
// Coeff (Players) = (Humain) Player Count / Max Player (20)
// Coeff (Day) = 1 + Day * 0.1
// ======== Units difficulty ========
// 0.05 => Unit ~= 1 player
// 0.25 => Unit ~= 25% (4) players
// 1.00 => Unit ~= Full team (20 players)
//===========================================================================
function Trig_Update_Difficulty_Func004C takes nothing returns boolean
    if ( not ( udg_GamePar_Debug == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Update_Difficulty_Actions takes nothing returns nothing
    set udg_Difficulty_Time_Coeff = ( 0.90 + ( 0.10 * I2R(udg_Day) ) )
    set udg_Difficulty_PlayersCount_Coeff = ( I2R(CountPlayersInForceBJ(udg_Players_Active)) / I2R(udg_CPLAYERS_MAX) )
    set udg_Difficulty_Coeff = ( udg_Difficulty_Time_Coeff * udg_Difficulty_PlayersCount_Coeff )
    if ( Trig_Update_Difficulty_Func004C() ) then
        call DisplayTimedTextToForce( GetForceOfPlayer(Player(0)), 7.50, ( "Coeff difficulté [Global] = Coeff [Nombre de joueurs] * Coeff [Temps] = " + ( R2S(udg_Difficulty_Time_Coeff) + ( " * " + ( R2S(udg_Difficulty_PlayersCount_Coeff) + ( " = " + R2S(udg_Difficulty_Coeff) ) ) ) ) ) )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Update_Difficulty takes nothing returns nothing
    set gg_trg_Update_Difficulty = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Update_Difficulty, function Trig_Update_Difficulty_Actions )
endfunction

//===========================================================================
// Trigger: Debug Dummy Display Order Strings
//===========================================================================
function Trig_Debug_Dummy_Display_Order_Strings_Func001C takes nothing returns boolean
    if ( ( GetUnitTypeId(GetTriggerUnit()) == 'h001' ) ) then
        return true
    endif
    if ( ( GetUnitTypeId(GetTriggerUnit()) == 'h009' ) ) then
        return true
    endif
    return false
endfunction

function Trig_Debug_Dummy_Display_Order_Strings_Conditions takes nothing returns boolean
    if ( not Trig_Debug_Dummy_Display_Order_Strings_Func001C() ) then
        return false
    endif
    return true
endfunction

function Trig_Debug_Dummy_Display_Order_Strings_Actions takes nothing returns nothing
    call DisplayTimedTextToForce( GetPlayersAll(), 1.00, OrderId2StringBJ(GetIssuedOrderIdBJ()) )
endfunction

//===========================================================================
function InitTrig_Debug_Dummy_Display_Order_Strings takes nothing returns nothing
    set gg_trg_Debug_Dummy_Display_Order_Strings = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Debug_Dummy_Display_Order_Strings, EVENT_PLAYER_UNIT_ISSUED_TARGET_ORDER )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Debug_Dummy_Display_Order_Strings, EVENT_PLAYER_UNIT_ISSUED_POINT_ORDER )
    call TriggerAddCondition( gg_trg_Debug_Dummy_Display_Order_Strings, Condition( function Trig_Debug_Dummy_Display_Order_Strings_Conditions ) )
    call TriggerAddAction( gg_trg_Debug_Dummy_Display_Order_Strings, function Trig_Debug_Dummy_Display_Order_Strings_Actions )
endfunction

//===========================================================================
// Trigger: Cast Initialization
//===========================================================================
function Trig_Cast_Initialization_Actions takes nothing returns nothing
    call InitHashtableBJ(  )
    set udg_Cast_Effects_Table = GetLastCreatedHashtableBJ()
endfunction

//===========================================================================
function InitTrig_Cast_Initialization takes nothing returns nothing
    set gg_trg_Cast_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Cast_Initialization, function Trig_Cast_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Cast Begin
//===========================================================================
function Trig_Cast_Begin_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cast_Begin_Actions takes nothing returns nothing
    set udg__fltext = LoadTextTagHandleBJ(0, GetHandleIdBJ(GetTriggerUnit()), udg_Cast_Effects_Table)
    call DestroyTextTagBJ( udg__fltext )
    // Cleanup
    set udg__string1 = GetAbilityName(GetSpellAbilityId())
    set udg__point1 = GetUnitLoc(GetTriggerUnit())
    set udg__point2 = PolarProjectionBJ(udg__point1, ( I2R(StringLength(udg__string1)) * 8.00 ), 180.00)
    call CreateTextTagLocBJ( GetAbilityName(GetSpellAbilityId()), udg__point2, 0, 10.00, 20.00, 20.00, 100, 0 )
    call ShowTextTagForceBJ( true, GetLastCreatedTextTag(), GetPlayersAll() )
    call SetTextTagPermanentBJ( GetLastCreatedTextTag(), false )
    call SetTextTagFadepointBJ( udg__fltext, 0.00 )
    call SetTextTagSuspendedBJ( GetLastCreatedTextTag(), true )
    call SaveTextTagHandleBJ( GetLastCreatedTextTag(), 0, GetHandleIdBJ(GetTriggerUnit()), udg_Cast_Effects_Table )
    call RemoveLocation(udg__point1)
    call RemoveLocation(udg__point2)
endfunction

//===========================================================================
function InitTrig_Cast_Begin takes nothing returns nothing
    set gg_trg_Cast_Begin = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Cast_Begin, EVENT_PLAYER_UNIT_SPELL_CHANNEL )
    call TriggerAddCondition( gg_trg_Cast_Begin, Condition( function Trig_Cast_Begin_Conditions ) )
    call TriggerAddAction( gg_trg_Cast_Begin, function Trig_Cast_Begin_Actions )
endfunction

//===========================================================================
// Trigger: Cast Initiate
//===========================================================================
function Trig_Cast_Initiate_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cast_Initiate_Actions takes nothing returns nothing
    set udg__fltext = LoadTextTagHandleBJ(0, GetHandleIdBJ(GetTriggerUnit()), udg_Cast_Effects_Table)
    call SetTextTagVelocityBJ( udg__fltext, 128.00, 90 )
    call SetTextTagLifespanBJ( udg__fltext, 1.00 )
    call SetTextTagSuspendedBJ( GetLastCreatedTextTag(), false )
    call FlushChildHashtableBJ( GetHandleIdBJ(GetTriggerUnit()), udg_Cast_Effects_Table )
endfunction

//===========================================================================
function InitTrig_Cast_Initiate takes nothing returns nothing
    set gg_trg_Cast_Initiate = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Cast_Initiate, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Cast_Initiate, Condition( function Trig_Cast_Initiate_Conditions ) )
    call TriggerAddAction( gg_trg_Cast_Initiate, function Trig_Cast_Initiate_Actions )
endfunction

//===========================================================================
// Trigger: Cast Stop
//===========================================================================
function Trig_Cast_Stop_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cast_Stop_Actions takes nothing returns nothing
    set udg__fltext = LoadTextTagHandleBJ(0, GetHandleIdBJ(GetTriggerUnit()), udg_Cast_Effects_Table)
    call SetTextTagColorBJ( udg__fltext, 100, 20.00, 20.00, 0 )
    call SetTextTagTextBJ( udg__fltext, "TRIGSTR_771", 10.00 )
    call SetTextTagLifespanBJ( udg__fltext, 1.50 )
    call SetTextTagSuspendedBJ( GetLastCreatedTextTag(), false )
endfunction

//===========================================================================
function InitTrig_Cast_Stop takes nothing returns nothing
    set gg_trg_Cast_Stop = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Cast_Stop, EVENT_PLAYER_UNIT_SPELL_ENDCAST )
    call TriggerAddCondition( gg_trg_Cast_Stop, Condition( function Trig_Cast_Stop_Conditions ) )
    call TriggerAddAction( gg_trg_Cast_Stop, function Trig_Cast_Stop_Actions )
endfunction

//===========================================================================
// Trigger: Projectile Magique Initialization
//===========================================================================
function Trig_Projectile_Magique_Initialization_Actions takes nothing returns nothing
    call InitHashtableBJ(  )
    set udg_SpellMagicProj_Data = GetLastCreatedHashtableBJ()
endfunction

//===========================================================================
function InitTrig_Projectile_Magique_Initialization takes nothing returns nothing
    set gg_trg_Projectile_Magique_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Projectile_Magique_Initialization, function Trig_Projectile_Magique_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Projectile Magique Spell
//===========================================================================
function Trig_Projectile_Magique_Spell_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A004' ) ) then
        return false
    endif
    if ( not ( GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit()) > 1 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Projectile_Magique_Spell_Actions takes nothing returns nothing
    call GroupAddUnitSimple( GetTriggerUnit(), udg_SpellMagicProj_Units )
    set udg__int_NumberOfProjectiles = ( GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit()) - 1 )
    call SaveIntegerBJ( udg__int_NumberOfProjectiles, 0, GetHandleIdBJ(GetTriggerUnit()), udg_SpellMagicProj_Data )
    call SaveUnitHandleBJ( GetSpellTargetUnit(), 1, GetHandleIdBJ(GetTriggerUnit()), udg_SpellMagicProj_Data )
endfunction

//===========================================================================
function InitTrig_Projectile_Magique_Spell takes nothing returns nothing
    set gg_trg_Projectile_Magique_Spell = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Projectile_Magique_Spell, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Projectile_Magique_Spell, Condition( function Trig_Projectile_Magique_Spell_Conditions ) )
    call TriggerAddAction( gg_trg_Projectile_Magique_Spell, function Trig_Projectile_Magique_Spell_Actions )
endfunction

//===========================================================================
// Trigger: Projectile Magique Tasks
//
// Hashtable :
// Key = Spell caster
// 0 -> Number of projectiles remaining
// 1 -> Target unit
//===========================================================================
function Trig_Projectile_Magique_Tasks_Func001Func002C takes nothing returns boolean
    if ( not ( udg__int_NumberOfProjectiles > 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Projectile_Magique_Tasks_Func001A takes nothing returns nothing
    set udg__int_NumberOfProjectiles = LoadIntegerBJ(0, GetHandleIdBJ(GetEnumUnit()), udg_SpellMagicProj_Data)
    if ( Trig_Projectile_Magique_Tasks_Func001Func002C() ) then
        set udg__unit_TargetUnit = LoadUnitHandleBJ(1, GetHandleIdBJ(GetEnumUnit()), udg_SpellMagicProj_Data)
        set udg__point1 = GetUnitLoc(GetEnumUnit())
        set udg__point2 = GetUnitLoc(udg__unit_TargetUnit)
        call CreateNUnitsAtLocFacingLocBJ( 1, 'h001', GetOwningPlayer(GetEnumUnit()), udg__point1, udg__point2 )
        call UnitAddAbilityBJ( 'A006', GetLastCreatedUnit() )
        call SetUnitAbilityLevelSwapped( 'A006', GetLastCreatedUnit(), GetUnitAbilityLevelSwapped('A004', GetEnumUnit()) )
        call UnitApplyTimedLifeBJ( 1.00, 'BTLF', GetLastCreatedUnit() )
        call IssueTargetOrderBJ( GetLastCreatedUnit(), "firebolt", udg__unit_TargetUnit )
        call RemoveLocation(udg__point1)
        call RemoveLocation(udg__point2)
        call SaveIntegerBJ( ( udg__int_NumberOfProjectiles - 1 ), 0, GetHandleIdBJ(GetEnumUnit()), udg_SpellMagicProj_Data )
    else
        call GroupRemoveUnitSimple( GetEnumUnit(), udg_SpellMagicProj_Units )
        call FlushChildHashtableBJ( GetHandleIdBJ(GetEnumUnit()), udg_SpellMagicProj_Data )
    endif
endfunction

function Trig_Projectile_Magique_Tasks_Actions takes nothing returns nothing
    call ForGroupBJ( udg_SpellMagicProj_Units, function Trig_Projectile_Magique_Tasks_Func001A )
endfunction

//===========================================================================
function InitTrig_Projectile_Magique_Tasks takes nothing returns nothing
    set gg_trg_Projectile_Magique_Tasks = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Projectile_Magique_Tasks, 0.10 )
    call TriggerAddAction( gg_trg_Projectile_Magique_Tasks, function Trig_Projectile_Magique_Tasks_Actions )
endfunction

//===========================================================================
// Trigger: AoE Spells Initialization
//===========================================================================
function Trig_AoE_Spells_Initialization_Actions takes nothing returns nothing
    call InitHashtableBJ(  )
    set udg_SpellAoE_Data = GetLastCreatedHashtableBJ()
    // ---
    set udg_SpellAoE_DummySpell[2] = 'A007'
    set udg_SpellAoE_DummySpell_Order[2] = "inferno"
    set udg_SpellAoE_DummySpell[3] = 'A009'
    set udg_SpellAoE_DummySpell_Order[3] = "inferno"
    set udg_SpellAoE_DummySpell[4] = 'A00B'
    set udg_SpellAoE_DummySpell_Order[4] = "inferno"
    set udg_SpellAoE_DummySpell[5] = 'A00C'
    set udg_SpellAoE_DummySpell_Order[5] = "inferno"
    set udg_SpellAoE_DummySpell[9] = 'A00Q'
    set udg_SpellAoE_DummySpell_Order[9] = "flamestrike"
endfunction

//===========================================================================
function InitTrig_AoE_Spells_Initialization takes nothing returns nothing
    set gg_trg_AoE_Spells_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_AoE_Spells_Initialization, function Trig_AoE_Spells_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: AoE Spells Spell
//===========================================================================
function Trig_AoE_Spells_Spell_Func001C takes nothing returns boolean
    if ( ( GetSpellAbilityId() == 'A005' ) ) then
        return true
    endif
    if ( ( GetSpellAbilityId() == 'A008' ) ) then
        return true
    endif
    if ( ( GetSpellAbilityId() == 'A00A' ) ) then
        return true
    endif
    if ( ( GetSpellAbilityId() == 'A00D' ) ) then
        return true
    endif
    return false
endfunction

function Trig_AoE_Spells_Spell_Conditions takes nothing returns boolean
    if ( not Trig_AoE_Spells_Spell_Func001C() ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Spell_Func003C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00D' ) ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Spell_Func007C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A005' ) ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Spell_Func008C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A008' ) ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Spell_Func009C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A008' ) ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Spell_Func010C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00D' ) ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Spell_Func011C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00P' ) ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Spell_Func018Func001C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == udg_Spells_Capacity[GetForLoopIndexA()] ) ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Spell_Actions takes nothing returns nothing
    set udg__point1 = GetSpellTargetLoc()
    if ( Trig_AoE_Spells_Spell_Func003C() ) then
        call CreateNUnitsAtLoc( 1, 'h006', GetOwningPlayer(GetTriggerUnit()), udg__point1, bj_UNIT_FACING )
        call SetUnitFlyHeightBJ( GetLastCreatedUnit(), 200.00, 50.00 )
        call SetUnitTimeScalePercent( GetLastCreatedUnit(), 20.00 )
        call SetUnitAnimation( GetLastCreatedUnit(), "death" )
    else
        call CreateNUnitsAtLoc( 1, 'h001', GetOwningPlayer(GetTriggerUnit()), udg__point1, bj_UNIT_FACING )
    endif
    call GroupAddUnitSimple( GetLastCreatedUnit(), udg_SpellAoE_Instance )
    set udg__int_LevelOfSpell = GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit())
    // Spells specifics
    if ( Trig_AoE_Spells_Spell_Func007C() ) then
        set udg__int_Duration = ( 60 + ( 0 * udg__int_LevelOfSpell ) )
        set udg__real_Radius = ( 600.00 + ( 0.00 * I2R(udg__int_LevelOfSpell) ) )
        set udg__int_NumberOfProjectiles = ( 1 + ( 1 * udg__int_LevelOfSpell ) )
    else
    endif
    if ( Trig_AoE_Spells_Spell_Func008C() ) then
        set udg__int_Duration = ( 60 + ( 0 * udg__int_LevelOfSpell ) )
        set udg__real_Radius = ( 600.00 + ( 0.00 * I2R(udg__int_LevelOfSpell) ) )
        set udg__int_NumberOfProjectiles = ( 4 + ( 1 * udg__int_LevelOfSpell ) )
    else
    endif
    if ( Trig_AoE_Spells_Spell_Func009C() ) then
        set udg__int_Duration = ( 60 + ( 0 * udg__int_LevelOfSpell ) )
        set udg__real_Radius = ( 600.00 + ( 0.00 * I2R(udg__int_LevelOfSpell) ) )
        set udg__int_NumberOfProjectiles = ( 6 + ( 1 * udg__int_LevelOfSpell ) )
    else
    endif
    if ( Trig_AoE_Spells_Spell_Func010C() ) then
        set udg__int_Duration = ( 20 + ( 0 * udg__int_LevelOfSpell ) )
        set udg__real_Radius = ( 600.00 + ( 0.00 * I2R(udg__int_LevelOfSpell) ) )
        set udg__int_NumberOfProjectiles = ( 20 + ( 0 * udg__int_LevelOfSpell ) )
    else
    endif
    if ( Trig_AoE_Spells_Spell_Func011C() ) then
        set udg__int_Duration = ( 60 + ( 0 * udg__int_LevelOfSpell ) )
        set udg__real_Radius = ( 450.00 + ( 0.00 * I2R(udg__int_LevelOfSpell) ) )
        set udg__int_NumberOfProjectiles = ( 1 + ( 0 * udg__int_LevelOfSpell ) )
    else
    endif
    // Save in hash table
    call SaveIntegerBJ( udg__int_Duration, 0, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellAoE_Data )
    call SaveUnitHandleBJ( GetTriggerUnit(), 1, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellAoE_Data )
    call SaveLocationHandleBJ( udg__point1, 2, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellAoE_Data )
    call SaveRealBJ( udg__real_Radius, 3, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellAoE_Data )
    call SaveIntegerBJ( udg__int_NumberOfProjectiles, 5, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellAoE_Data )
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = udg_Spells_Count
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_AoE_Spells_Spell_Func018Func001C() ) then
            call SaveIntegerBJ( GetForLoopIndexA(), 4, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellAoE_Data )
            return
        else
        endif
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_AoE_Spells_Spell takes nothing returns nothing
    set gg_trg_AoE_Spells_Spell = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_AoE_Spells_Spell, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_AoE_Spells_Spell, Condition( function Trig_AoE_Spells_Spell_Conditions ) )
    call TriggerAddAction( gg_trg_AoE_Spells_Spell, function Trig_AoE_Spells_Spell_Actions )
endfunction

//===========================================================================
// Trigger: AoE Spells Tasks
//
// Hashtable :
// Key = Dummy
// 0 -> Ticks left
// 1 -> Spell caster
// 2 -> Target point
// 3 -> Radius
// 4 -> Ability : 0 = Nuage Puant | 1 = Nuage mortel
// 5 -> Intensity
//===========================================================================
function Trig_AoE_Spells_Tasks_Func001Func002Func011Func008C takes nothing returns boolean
    if ( not ( udg__bool_SpellCastOk == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Tasks_Func001Func002C takes nothing returns boolean
    if ( not ( udg__int_Duration > 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_AoE_Spells_Tasks_Func001A takes nothing returns nothing
    set udg__int_Duration = LoadIntegerBJ(0, GetHandleIdBJ(GetEnumUnit()), udg_SpellAoE_Data)
    if ( Trig_AoE_Spells_Tasks_Func001Func002C() ) then
        set udg__unit_SpellCaster = LoadUnitHandleBJ(1, GetHandleIdBJ(GetEnumUnit()), udg_SpellAoE_Data)
        set udg__point1 = LoadLocationHandleBJ(2, GetHandleIdBJ(GetEnumUnit()), udg_SpellAoE_Data)
        set udg__real_Radius = LoadRealBJ(3, GetHandleIdBJ(GetEnumUnit()), udg_SpellAoE_Data)
        set udg__int1 = LoadIntegerBJ(4, GetHandleIdBJ(GetEnumUnit()), udg_SpellAoE_Data)
        set udg__int_NumberOfProjectiles = LoadIntegerBJ(5, GetHandleIdBJ(GetEnumUnit()), udg_SpellAoE_Data)
        set bj_forLoopAIndex = 1
        set bj_forLoopAIndexEnd = udg__int_NumberOfProjectiles
        loop
            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
            set udg__point2 = PolarProjectionBJ(udg__point1, GetRandomReal(0, udg__real_Radius), GetRandomDirectionDeg())
            call CreateNUnitsAtLoc( 1, 'h001', Player(PLAYER_NEUTRAL_AGGRESSIVE), udg__point2, GetRandomDirectionDeg() )
            call UnitApplyTimedLifeBJ( 2.00, 'BTLF', GetLastCreatedUnit() )
            call UnitAddAbilityBJ( udg_SpellAoE_DummySpell[udg__int1], GetLastCreatedUnit() )
            call SetUnitAbilityLevelSwapped( udg_SpellAoE_DummySpell[udg__int1], GetLastCreatedUnit(), GetUnitAbilityLevelSwapped(udg_SpellAoE_Type[udg__int1], udg__unit_SpellCaster) )
            set udg__string1 = udg_SpellAoE_DummySpell_Order[udg__int1]
            set udg__bool_SpellCastOk = IssuePointOrderLoc(GetLastCreatedUnit(), udg__string1, udg__point2)
            if ( Trig_AoE_Spells_Tasks_Func001Func002Func011Func008C() ) then
                call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "AoE |c00ff0000FAIL|r : " + udg__string1 ) )
            else
            endif
            call IssuePointOrderLocBJ( GetLastCreatedUnit(), "dreadlordinferno", udg__point2 )
            call RemoveLocation(udg__point2)
            set bj_forLoopAIndex = bj_forLoopAIndex + 1
        endloop
        // FIXME BUG Location deleted ?
        call SaveIntegerBJ( ( udg__int_Duration - 1 ), 0, GetHandleIdBJ(GetEnumUnit()), udg_SpellAoE_Data )
    else
        set udg__point1 = LoadLocationHandleBJ(2, GetHandleIdBJ(GetEnumUnit()), udg_SpellAoE_Data)
        call RemoveLocation(udg__point1)
        call GroupRemoveUnitSimple( GetEnumUnit(), udg_SpellAoE_Instance )
        call KillUnit( GetEnumUnit() )
        call FlushChildHashtableBJ( GetHandleIdBJ(GetEnumUnit()), udg_SpellAoE_Data )
    endif
endfunction

function Trig_AoE_Spells_Tasks_Actions takes nothing returns nothing
    call ForGroupBJ( udg_SpellAoE_Instance, function Trig_AoE_Spells_Tasks_Func001A )
endfunction

//===========================================================================
function InitTrig_AoE_Spells_Tasks takes nothing returns nothing
    set gg_trg_AoE_Spells_Tasks = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_AoE_Spells_Tasks, 0.25 )
    call TriggerAddAction( gg_trg_AoE_Spells_Tasks, function Trig_AoE_Spells_Tasks_Actions )
endfunction

//===========================================================================
// Trigger: Rayon Spells Initialization
//===========================================================================
function Trig_Rayon_Spells_Initialization_Actions takes nothing returns nothing
    call InitHashtableBJ(  )
    set udg_SpellRayon_Data = GetLastCreatedHashtableBJ()
    // ---
endfunction

//===========================================================================
function InitTrig_Rayon_Spells_Initialization takes nothing returns nothing
    set gg_trg_Rayon_Spells_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Rayon_Spells_Initialization, function Trig_Rayon_Spells_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Cone Spells Initialization
//===========================================================================
function Trig_Cone_Spells_Initialization_Actions takes nothing returns nothing
    call InitHashtableBJ(  )
    set udg_SpellCone_Data = GetLastCreatedHashtableBJ()
    // ---
    set udg_SpellAoE_DummySpell[11] = 'A00X'
    set udg_SpellAoE_DummySpell_Order[11] = "frostnova"
endfunction

//===========================================================================
function InitTrig_Cone_Spells_Initialization takes nothing returns nothing
    set gg_trg_Cone_Spells_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Cone_Spells_Initialization, function Trig_Cone_Spells_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Cone Spells Spell
//===========================================================================
function Trig_Cone_Spells_Spell_Func002C takes nothing returns boolean
    if ( ( GetSpellAbilityId() == 'A00W' ) ) then
        return true
    endif
    if ( ( GetSpellAbilityId() == 'A00T' ) ) then
        return true
    endif
    if ( ( GetSpellAbilityId() == 'A00Y' ) ) then
        return true
    endif
    return false
endfunction

function Trig_Cone_Spells_Spell_Conditions takes nothing returns boolean
    if ( not Trig_Cone_Spells_Spell_Func002C() ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Spell_Func017C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00W' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Spell_Func019C takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00T' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Spell_Actions takes nothing returns nothing
    // ======== GENERICS (DEFAULT) ========
    set udg__point1 = GetUnitLoc(GetTriggerUnit())
    set udg__point2 = GetSpellTargetLoc()
    set udg__int_LevelOfSpell = GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit())
    set udg__real_CurrentTime = TimerGetElapsed(udg_Time)
    set udg__real_Time = udg__real_CurrentTime
    set udg__real_Angle = AngleBetweenPoints(udg__point1, udg__point2)
    set udg__unit_SpellCaster = GetTriggerUnit()
    // -
    call CreateNUnitsAtLocFacingLocBJ( 1, 'h001', GetOwningPlayer(GetTriggerUnit()), udg__point1, udg__point2 )
    call SaveUnitHandleBJ( GetLastCreatedUnit(), 0, GetHandleIdBJ(GetTriggerUnit()), udg_SpellCone_Data )
    call GroupAddUnitSimple( GetLastCreatedUnit(), udg_SpellCone_Instance )
    // ======== SPELLS SPECIFICS ========
    // Cône de froid
    if ( Trig_Cone_Spells_Spell_Func017C() ) then
        set udg__real_AngleSpread = 45.00
        set udg__real_TimeEnd = ( udg__real_CurrentTime + 5.00 )
        // -
        call SaveRealBJ( 0.00, 10, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 50.00, 11, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 128.00, 12, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 50.00, 13, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 0.00, 14, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        // Graphics
        call SaveStringBJ( "Abilities\\Spells\\Items\\AIob\\AIobSpecialArt.mdl", 20, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 0.20, 21, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( udg__real_CurrentTime, 22, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 64.00, 23, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        // Graphics (HEAD)
        call SaveStringBJ( "Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", 24, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 0.25, 25, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( udg__real_CurrentTime, 26, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 128.00, 27, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        // Effects
        call SaveIntegerBJ( 11, 30, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
    else
    endif
    // Incinérateur d'Aganazar
    if ( Trig_Cone_Spells_Spell_Func019C() ) then
        set udg__real_Angle = -1.00
        set udg__real_AngleSpread = 0.00
        set udg__real_TimeEnd = ( udg__real_CurrentTime + 12.00 )
        set udg__point2 = GetSpellTargetLoc()
        // -
        call SaveRealBJ( 0.00, 10, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 100.00, 11, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 512.00, 12, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 100.00, 13, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 512.00, 14, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        // Graphics
        call SaveStringBJ( "Abilities\\Spells\\Items\\AIfb\\AIfbSpecialArt.mdl", 20, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 0.10, 21, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( udg__real_CurrentTime, 22, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 64.00, 23, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        // Graphics (HEAD)
        call SaveStringBJ( "Abilities\\Spells\\Undead\\FrostNova\\FrostNovaTarget.mdl", 24, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 0.25, 25, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( udg__real_CurrentTime, 26, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        call SaveRealBJ( 0.00, 27, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
        // Effects
        call SaveIntegerBJ( 0, 30, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
    else
    endif
    // Feu solaire
    // SAVE IN HASH TABLE
    call SaveRealBJ( udg__real_Time, 0, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
    call SaveRealBJ( udg__real_TimeEnd, 1, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
    call SaveUnitHandleBJ( udg__unit_SpellCaster, 2, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
    call SaveRealBJ( udg__real_Angle, 3, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
    call SaveRealBJ( udg__real_AngleSpread, 4, GetHandleIdBJ(GetLastCreatedUnit()), udg_SpellCone_Data )
endfunction

//===========================================================================
function InitTrig_Cone_Spells_Spell takes nothing returns nothing
    set gg_trg_Cone_Spells_Spell = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Cone_Spells_Spell, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Cone_Spells_Spell, Condition( function Trig_Cone_Spells_Spell_Conditions ) )
    call TriggerAddAction( gg_trg_Cone_Spells_Spell, function Trig_Cone_Spells_Spell_Actions )
endfunction

//===========================================================================
// Trigger: Cone Spells Tasks
//
// ======== Hashtable ========
// Key = Dummy
// 0 -> [REAL] Begin time
// 1 -> [REAL] End time
// 2 -> [UNIT] Original spell caster
// 3 -> [REAL] Angle (Degrees) : Fixed OR Negative = Follow caster
// 4 -> [REAL] Full angle of spread (Degrees)
// ==== Range = A * <time> + B ====
// 10 -> [REAL] Queue Speed : A
// 11 -> [REAL] Queue Speed : B
// 12 -> [REAL] Head Speed : A
// 13 -> [REAL] Head Speed : B
// 14 -> [REAL] Max Range
// ==== Graphics ====
// 20 -> [STR] Special effect path (or empty)
// 21 -> [REAL] Time interval for special effects
// 22 -> [REAL] Previous time of special effect
// 23 -> [REAL] Radius of special effect
// ==== Graphics (HEAD) ====
// 24 -> [STR] Special effect path for HEAD (or empty)
// 25 -> [REAL] Time interval for special effects
// 26 -> [REAL] Previous time of special effect
// 27 -> [REAL] Radius of special effect
// ==== Effects ====
// 30 -> [INT] Dummy ability index (Unit-targeted)
// 31 -> [REAL] Interval of cast
// 32 -> [REAL] Previous time of cast
//===========================================================================
function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func004C takes nothing returns boolean
    if ( not ( udg__real_Angle < 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func012C takes nothing returns boolean
    if ( not ( udg__real_Range > 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func018Func002Func004Func007C takes nothing returns boolean
    if ( not ( udg__int_NumberOfProjectiles != 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func018Func002C takes nothing returns boolean
    if ( not ( ( udg__real_CurrentTime - udg__real_Time ) >= udg__real_Frequency ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func018C takes nothing returns boolean
    if ( not ( udg__real_Radius != 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func024Func003C takes nothing returns boolean
    if ( not ( ( udg__real_CurrentTime - udg__real_Time ) >= udg__real_Frequency ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func024C takes nothing returns boolean
    if ( not ( udg__real_Radius != 0.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004Func001Func004Func003Func006C takes nothing returns boolean
    if ( not ( udg__bool_SpellCastOk == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004Func001Func004Func003C takes nothing returns boolean
    if ( not ( RAbsBJ(ModuloReal(( udg__real1 - udg__real_Angle ), 360.00)) <= udg__real_AngleSpread ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004Func001Func004C takes nothing returns boolean
    if ( not ( udg__real1 >= udg__real_Queue ) ) then
        return false
    endif
    if ( not ( udg__real1 <= udg__real_Head ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004Func001C takes nothing returns boolean
    if ( not ( IsUnitAliveBJ(GetEnumUnit()) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004A takes nothing returns nothing
    if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004Func001C() ) then
        set udg__point_Target = GetUnitLoc(GetEnumUnit())
        set udg__real1 = DistanceBetweenPoints(udg__point1, udg__point_Target)
        if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004Func001Func004C() ) then
            set udg__real1 = AngleBetweenPoints(udg__point1, udg__point_Target)
            call DisplayTimedTextToForce( GetPlayersAll(), 1.00, ( "Spell angle / Angle to target : " + ( R2S(udg__real_Angle) + ( " / " + ( R2S(udg__real1) + "" ) ) ) ) )
            if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004Func001Func004Func003C() ) then
                call CreateNUnitsAtLoc( 1, 'h001', GetOwningPlayer(udg__unit_SpellCaster), udg__point_Target, bj_UNIT_FACING )
                call UnitApplyTimedLifeBJ( 1.00, 'BTLF', GetLastCreatedUnit() )
                call UnitAddAbilityBJ( udg__ability1, GetLastCreatedUnit() )
                call SetUnitAbilityLevelSwapped( udg__ability1, GetLastCreatedUnit(), 1 )
                set udg__bool_SpellCastOk = IssueTargetOrder(GetLastCreatedUnit(), udg__string1, GetEnumUnit())
                if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004Func001Func004Func003Func006C() ) then
                    call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "Dummy issue order with target |c00ff0000FAIL|r : " + GetAbilityName(udg__ability1) ) )
                else
                endif
            else
            endif
        else
        endif
    else
    endif
    call RemoveLocation(udg__point_Target)
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027C takes nothing returns boolean
    if ( not ( udg__int1 != 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003C takes nothing returns boolean
    if ( not ( udg__real_CurrentTime >= udg__real_Time ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001Func004C takes nothing returns boolean
    if ( not ( udg__real_CurrentTime < udg__real_TimeEnd ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002Func001C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'h001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Tasks_Func002A takes nothing returns nothing
    if ( Trig_Cone_Spells_Tasks_Func002Func001C() ) then
        set udg__real_Time = LoadRealBJ(0, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
        set udg__real_TimeEnd = LoadRealBJ(1, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
        if ( Trig_Cone_Spells_Tasks_Func002Func001Func004C() ) then
            // Begun ?
            if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003C() ) then
                set udg__unit_SpellCaster = LoadUnitHandleBJ(2, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                set udg__real_Angle = LoadRealBJ(3, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                // Does the spell follow the caster ?
                if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func004C() ) then
                    set udg__point1 = GetUnitLoc(udg__unit_SpellCaster)
                    set udg__real_Angle = GetUnitFacing(udg__unit_SpellCaster)
                else
                    set udg__point1 = GetUnitLoc(GetEnumUnit())
                endif
                set udg__real_AngleSpread = LoadRealBJ(4, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                // Time = Time elapsed since begining
                set udg__real_Time = ( udg__real_CurrentTime - udg__real_Time )
                set udg__real_Queue = ( LoadRealBJ(11, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data) + ( udg__real_Time * LoadRealBJ(10, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data) ) )
                set udg__real_Head = ( LoadRealBJ(13, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data) + ( udg__real_Time * LoadRealBJ(12, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data) ) )
                set udg__real_Range = LoadRealBJ(14, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func012C() ) then
                    set udg__real_Head = RMinBJ(udg__real_Head, udg__real_Range)
                    set udg__real_Queue = RMinBJ(udg__real_Queue, udg__real_Head)
                else
                endif
                // GRAPHICS : ALL ALONG
                set udg__string1 = LoadStringBJ(20, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                set udg__real_Frequency = LoadRealBJ(21, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                set udg__real_Time = LoadRealBJ(22, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                set udg__real_Radius = LoadRealBJ(23, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func018C() ) then
                    // Has enough time elapsed to show a new special effect ?
                    if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func018Func002C() ) then
                        call SaveRealBJ( ( udg__real_Time + udg__real_Frequency ), 22, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data )
                        // Show a new set of special effects
                        set udg__int_Length = R2I(( ( udg__real_Head - udg__real_Queue ) / udg__real_Radius ))
                        set bj_forLoopAIndex = 0
                        set bj_forLoopAIndexEnd = udg__int_Length
                        loop
                            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
                            // Circonference of half the exterior of the cone
                            set udg__real_Circonference = ( ( I2R(GetForLoopIndexA()) * udg__real_Radius ) * udg_C2PI )
                            set udg__real_Circonference = ( ( udg__real_AngleSpread / 360.00 ) * udg__real_Circonference )
                            // Number of effects for this half of the cone
                            set udg__int_NumberOfProjectiles = R2I(( udg__real_Circonference / udg__real_Radius ))
                            set udg__int_NumberOfProjectiles = IMaxBJ(1, R2I(( udg__real_Circonference / udg__real_Radius )))
                            if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func018Func002Func004Func007C() ) then
                                set udg__real_Increment = ( udg__real_AngleSpread / I2R(udg__int_NumberOfProjectiles) )
                                set udg__real1 = ( udg__real_Angle - ( I2R(udg__int_NumberOfProjectiles) * udg__real_Increment ) )
                                set bj_forLoopBIndex = ( -1 * udg__int_NumberOfProjectiles )
                                set bj_forLoopBIndexEnd = udg__int_NumberOfProjectiles
                                loop
                                    exitwhen bj_forLoopBIndex > bj_forLoopBIndexEnd
                                    set udg__point2 = PolarProjectionBJ(udg__point1, ( I2R(GetForLoopIndexA()) * udg__real_Radius ), ModuloReal(udg__real1, 360.00))
                                    set udg__point2 = PolarProjectionBJ(udg__point1, ( udg__real_Queue + ( I2R(GetForLoopIndexA()) * udg__real_Radius ) ), ModuloReal(udg__real1, 360.00))
                                    call AddSpecialEffectLocBJ( udg__point2, udg__string1 )
                                    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
                                    call RemoveLocation(udg__point2)
                                    set udg__real1 = ( udg__real1 + udg__real_Increment )
                                    set bj_forLoopBIndex = bj_forLoopBIndex + 1
                                endloop
                            else
                            endif
                            set bj_forLoopAIndex = bj_forLoopAIndex + 1
                        endloop
                    else
                    endif
                else
                endif
                // GRAPHICS : HEAD
                set udg__string1 = LoadStringBJ(24, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                set udg__real_Frequency = LoadRealBJ(25, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                set udg__real_Time = LoadRealBJ(26, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                set udg__real_Radius = LoadRealBJ(27, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func024C() ) then
                    // Has enough time elapsed to show a new special effect ?
                    if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func024Func003C() ) then
                        call SaveRealBJ( ( udg__real_Time + udg__real_Frequency ), 26, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data )
                        // Show a new set of special effects
                        // Circonference of half the exterior of the cone
                        set udg__real_Circonference = ( udg__real_Head * udg_C2PI )
                        set udg__real_Circonference = ( ( udg__real_AngleSpread / 360.00 ) * udg__real_Circonference )
                        // Number of effects for this half of the cone
                        set udg__int_NumberOfProjectiles = R2I(( udg__real_Circonference / udg__real_Radius ))
                        set udg__int_NumberOfProjectiles = IMaxBJ(1, R2I(( udg__real_Circonference / udg__real_Radius )))
                        set udg__real1 = ( udg__real_AngleSpread / I2R(udg__int_NumberOfProjectiles) )
                        set bj_forLoopAIndex = ( -1 * udg__int_NumberOfProjectiles )
                        set bj_forLoopAIndexEnd = udg__int_NumberOfProjectiles
                        loop
                            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
                            set udg__point2 = PolarProjectionBJ(udg__point1, udg__real_Head, ModuloReal(( udg__real_Angle + ( I2R(GetForLoopIndexA()) * udg__real1 ) ), 360.00))
                            call AddSpecialEffectLocBJ( udg__point2, udg__string1 )
                            call DestroyEffectBJ( GetLastCreatedEffectBJ() )
                            call RemoveLocation(udg__point2)
                            set bj_forLoopAIndex = bj_forLoopAIndex + 1
                        endloop
                    else
                    endif
                else
                endif
                // EFFECTS
                set udg__int1 = LoadIntegerBJ(30, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data)
                if ( Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027C() ) then
                    set udg__ability1 = udg_SpellAoE_DummySpell[udg__int1]
                    set udg__string1 = udg_SpellAoE_DummySpell_Order[udg__int1]
                    // Search for targets
                    call ForGroupBJ( GetUnitsInRangeOfLocAll(udg__real_Head, udg__point1), function Trig_Cone_Spells_Tasks_Func002Func001Func004Func003Func027Func004A )
                else
                endif
                // Cleanup
                call RemoveLocation(udg__point1)
            else
            endif
        else
            // Finished ! Cleanup
            call GroupRemoveUnitSimple( GetEnumUnit(), udg_SpellCone_Instance )
            call KillUnit( GetEnumUnit() )
            call FlushChildHashtableBJ( GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data )
        endif
    else
    endif
endfunction

function Trig_Cone_Spells_Tasks_Actions takes nothing returns nothing
    set udg__real_CurrentTime = TimerGetElapsed(udg_Time)
    call ForGroupBJ( udg_SpellCone_Instance, function Trig_Cone_Spells_Tasks_Func002A )
endfunction

//===========================================================================
function InitTrig_Cone_Spells_Tasks takes nothing returns nothing
    set gg_trg_Cone_Spells_Tasks = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Cone_Spells_Tasks, 0.10 )
    call TriggerAddAction( gg_trg_Cone_Spells_Tasks, function Trig_Cone_Spells_Tasks_Actions )
endfunction

//===========================================================================
// Trigger: Cone Spells Spell Stop
//===========================================================================
function Trig_Cone_Spells_Spell_Stop_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00W' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Spell_Stop_Func002Func002Func001C takes nothing returns boolean
    if ( not ( udg__unit_Dummy == GetEnumUnit() ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Spell_Stop_Func002Func002A takes nothing returns nothing
    if ( Trig_Cone_Spells_Spell_Stop_Func002Func002Func001C() ) then
        set udg__real_TimeEnd = TimerGetElapsed(udg_Time)
        call SaveRealBJ( udg__real_TimeEnd, 1, GetHandleIdBJ(GetEnumUnit()), udg_SpellCone_Data )
        call GroupRemoveUnitSimple( GetTriggerUnit(), udg_SpellCone_Instance )
        return
    else
    endif
endfunction

function Trig_Cone_Spells_Spell_Stop_Func002C takes nothing returns boolean
    if ( not ( udg__unit_Dummy != null ) ) then
        return false
    endif
    return true
endfunction

function Trig_Cone_Spells_Spell_Stop_Actions takes nothing returns nothing
    set udg__unit_Dummy = LoadUnitHandleBJ(0, GetHandleIdBJ(GetTriggerUnit()), udg_SpellCone_Data)
    if ( Trig_Cone_Spells_Spell_Stop_Func002C() ) then
        call ForGroupBJ( udg_SpellCone_Instance, function Trig_Cone_Spells_Spell_Stop_Func002Func002A )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Cone_Spells_Spell_Stop takes nothing returns nothing
    set gg_trg_Cone_Spells_Spell_Stop = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Cone_Spells_Spell_Stop, EVENT_PLAYER_UNIT_SPELL_ENDCAST )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Cone_Spells_Spell_Stop, EVENT_PLAYER_UNIT_SPELL_FINISH )
    call TriggerAddCondition( gg_trg_Cone_Spells_Spell_Stop, Condition( function Trig_Cone_Spells_Spell_Stop_Conditions ) )
    call TriggerAddAction( gg_trg_Cone_Spells_Spell_Stop, function Trig_Cone_Spells_Spell_Stop_Actions )
endfunction

//===========================================================================
// Trigger: Renvoi de sorts spell
//
// NOK : set udg__bool_SpellCastOk = IssueTargetOrderById(udg__unit_SpellCaster, udg__string1, udg__unit_TargetUnit)
// NOK : set udg__bool_SpellCastOk = IssueTargetOrderBJ (udg__unit_SpellCaster, udg__string1, udg__unit_TargetUnit)
//===========================================================================
function Trig_Renvoi_de_sorts_spell_Conditions takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetTriggerUnit()) != 'h001' ) ) then
        return false
    endif
    if ( not ( GetSpellTargetUnit() != null ) ) then
        return false
    endif
    if ( not ( UnitHasBuffBJ(GetSpellTargetUnit(), 'B001') == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Renvoi_de_sorts_spell_Func014C takes nothing returns boolean
    if ( not ( udg__bool_SpellCastOk == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Renvoi_de_sorts_spell_Actions takes nothing returns nothing
    set udg__point1 = GetUnitLoc(GetSpellTargetUnit())
    call CreateNUnitsAtLoc( 1, 'h001', GetOwningPlayer(GetSpellTargetUnit()), udg__point1, bj_UNIT_FACING )
    call UnitAddAbilityBJ( GetSpellAbilityId(), GetLastCreatedUnit() )
    call SetUnitAbilityLevelSwapped( GetSpellAbilityId(), GetLastCreatedUnit(), GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit()) )
    call UnitApplyTimedLifeBJ( 10.00, 'BTLF', GetLastCreatedUnit() )
    // -
    set udg__bool_SpellCastOk = false
    set udg__unit_SpellCaster = GetLastCreatedUnit()
    set udg__unit_TargetUnit = GetTriggerUnit()
    set udg__int1 = GetUnitCurrentOrder(GetTriggerUnit())
    set udg__bool_SpellCastOk = IssueTargetOrderById(udg__unit_SpellCaster, udg__int1, udg__unit_TargetUnit)
    if ( Trig_Renvoi_de_sorts_spell_Func014C() ) then
        call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "Renvoi de sorts |c00ff40ff40successful|r : " + GetAbilityName(GetSpellAbilityId()) ) )
    else
        call DisplayTimedTextToForce( GetPlayersAll(), 10.00, ( "Renvoi de sorts |c00ff0000FAIL|r : " + GetAbilityName(GetSpellAbilityId()) ) )
    endif
    // -
    call RemoveLocation(udg__point1)
    // - Cancel casting unit -
    call IssueImmediateOrderBJ( GetTriggerUnit(), "stop" )
endfunction

//===========================================================================
function InitTrig_Renvoi_de_sorts_spell takes nothing returns nothing
    set gg_trg_Renvoi_de_sorts_spell = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Renvoi_de_sorts_spell, EVENT_PLAYER_UNIT_SPELL_CAST )
    call TriggerAddCondition( gg_trg_Renvoi_de_sorts_spell, Condition( function Trig_Renvoi_de_sorts_spell_Conditions ) )
    call TriggerAddAction( gg_trg_Renvoi_de_sorts_spell, function Trig_Renvoi_de_sorts_spell_Actions )
endfunction

//===========================================================================
// Trigger: Spells Initialization
//===========================================================================
function Trig_Spells_Initialization_Actions takes nothing returns nothing
    call InitHashtableBJ(  )
    set udg_SpellFleshToStone_Data = GetLastCreatedHashtableBJ()
endfunction

//===========================================================================
function InitTrig_Spells_Initialization takes nothing returns nothing
    set gg_trg_Spells_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Spells_Initialization, function Trig_Spells_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Spell Hate
//===========================================================================
function Trig_Spell_Hate_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00O' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Hate_Func004001003 takes nothing returns boolean
    return ( IsUnitAliveBJ(GetFilterUnit()) == true )
endfunction

function Trig_Spell_Hate_Func004A takes nothing returns nothing
    set udg__point2 = GetUnitLoc(GetEnumUnit())
    call CreateNUnitsAtLocFacingLocBJ( 1, 'h001', GetOwningPlayer(GetEnumUnit()), udg__point2, GetUnitLoc(GetTriggerUnit()) )
    call UnitAddAbilityBJ( 'A00N', GetLastCreatedUnit() )
    call SetUnitAbilityLevelSwapped( 'A00N', GetLastCreatedUnit(), udg__int_LevelOfSpell )
    call UnitApplyTimedLifeBJ( 1.00, 'BTLF', GetLastCreatedUnit() )
    call IssueTargetOrderBJ( GetLastCreatedUnit(), "bloodlust", GetEnumUnit() )
    call AddSpecialEffectLocBJ( udg__point2, "Abilities\\Spells\\Items\\AIlm\\AIlmTarget.mdl" )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
    call RemoveLocation(udg__point2)
endfunction

function Trig_Spell_Hate_Actions takes nothing returns nothing
    set udg__int_LevelOfSpell = GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit())
    set udg__real_Radius = 600.00
    set udg__point1 = GetUnitLoc(GetTriggerUnit())
    call ForGroupBJ( GetUnitsInRangeOfLocMatching(udg__real_Radius, udg__point1, Condition(function Trig_Spell_Hate_Func004001003)), function Trig_Spell_Hate_Func004A )
    call RemoveLocation(udg__point1)
endfunction

//===========================================================================
function InitTrig_Spell_Hate takes nothing returns nothing
    set gg_trg_Spell_Hate = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Spell_Hate, EVENT_PLAYER_UNIT_SPELL_FINISH )
    call TriggerAddCondition( gg_trg_Spell_Hate, Condition( function Trig_Spell_Hate_Conditions ) )
    call TriggerAddAction( gg_trg_Spell_Hate, function Trig_Spell_Hate_Actions )
endfunction

//===========================================================================
// Trigger: Spell Transmutation de la chair en pierre
//===========================================================================
function Trig_Spell_Transmutation_de_la_chair_en_pierre_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00E' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Transmutation_de_la_chair_en_pierre_Func003C takes nothing returns boolean
    if ( not ( IsUnitInGroup(udg__unit_TargetUnit, udg_SpellFleshToStone_Units) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Transmutation_de_la_chair_en_pierre_Actions takes nothing returns nothing
    set udg__unit_SpellCaster = GetTriggerUnit()
    set udg__unit_TargetUnit = GetSpellTargetUnit()
    if ( Trig_Spell_Transmutation_de_la_chair_en_pierre_Func003C() ) then
        call GroupAddUnitSimple( udg__unit_TargetUnit, udg_SpellFleshToStone_Units )
        call PauseUnitBJ( true, udg__unit_TargetUnit )
        call SetUnitVertexColorBJ( udg__unit_TargetUnit, 75.00, 50.00, 0.00, 0 )
        call SetUnitTimeScalePercent( udg__unit_TargetUnit, 0.00 )
        call AddSpecialEffectTargetUnitBJ( "origin", udg__unit_TargetUnit, "Abilities\\Spells\\NightElf\\FaerieDragonInvis\\FaerieDragon_Invis.mdl" )
        call SaveEffectHandleBJ( GetLastCreatedEffectBJ(), 0, GetHandleIdBJ(GetSpellTargetUnit()), udg_SpellFleshToStone_Data )
    else
        call GroupRemoveUnitSimple( udg__unit_TargetUnit, udg_SpellFleshToStone_Units )
        call PauseUnitBJ( false, udg__unit_TargetUnit )
        call SetUnitVertexColorBJ( udg__unit_TargetUnit, 100.00, 100.00, 100.00, 0 )
        call SetUnitTimeScalePercent( udg__unit_TargetUnit, 100.00 )
        call DestroyEffectBJ( LoadEffectHandleBJ(0, GetHandleIdBJ(GetSpellTargetUnit()), udg_SpellFleshToStone_Data) )
    endif
    call PlaySoundOnUnitBJ( gg_snd_SPELL_FlashToStone, 100, GetSpellTargetUnit() )
endfunction

//===========================================================================
function InitTrig_Spell_Transmutation_de_la_chair_en_pierre takes nothing returns nothing
    set gg_trg_Spell_Transmutation_de_la_chair_en_pierre = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Spell_Transmutation_de_la_chair_en_pierre, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Spell_Transmutation_de_la_chair_en_pierre, Condition( function Trig_Spell_Transmutation_de_la_chair_en_pierre_Conditions ) )
    call TriggerAddAction( gg_trg_Spell_Transmutation_de_la_chair_en_pierre, function Trig_Spell_Transmutation_de_la_chair_en_pierre_Actions )
endfunction

//===========================================================================
// Trigger: Spell Transmutation de la chair en pierre Effects
//
// A REVOIR !
//===========================================================================
function Trig_Spell_Transmutation_de_la_chair_en_pierre_Effects_Conditions takes nothing returns boolean
    if ( not ( IsUnitInGroup(GetAttackedUnitBJ(), udg_SpellFleshToStone_Units) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Transmutation_de_la_chair_en_pierre_Effects_Actions takes nothing returns nothing
    call AddSpecialEffectTargetUnitBJ( "origin", GetAttackedUnitBJ(), "Abilities\\Spells\\Other\\Incinerate\\IncinerateBuff.mdl" )
    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
    call PlaySoundOnUnitBJ( gg_snd_SPELL_FlashToStoneAttacked, 100, GetAttackedUnitBJ() )
endfunction

//===========================================================================
function InitTrig_Spell_Transmutation_de_la_chair_en_pierre_Effects takes nothing returns nothing
    set gg_trg_Spell_Transmutation_de_la_chair_en_pierre_Effects = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Spell_Transmutation_de_la_chair_en_pierre_Effects, EVENT_PLAYER_UNIT_ATTACKED )
    call TriggerAddCondition( gg_trg_Spell_Transmutation_de_la_chair_en_pierre_Effects, Condition( function Trig_Spell_Transmutation_de_la_chair_en_pierre_Effects_Conditions ) )
    call TriggerAddAction( gg_trg_Spell_Transmutation_de_la_chair_en_pierre_Effects, function Trig_Spell_Transmutation_de_la_chair_en_pierre_Effects_Actions )
endfunction

//===========================================================================
// Trigger: Spell Baies nourricieres
//===========================================================================
function Trig_Spell_Baies_nourricieres_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A00S' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Baies_nourricieres_Actions takes nothing returns nothing
    set udg__int_LevelOfSpell = GetUnitAbilityLevelSwapped(GetSpellAbilityId(), GetTriggerUnit())
    set udg__point1 = GetUnitLoc(GetTriggerUnit())
    call CreateItemLoc( 'I00L', udg__point1 )
    call SetItemCharges( GetLastCreatedItem(), udg__int_LevelOfSpell )
    call UnitAddItemSwapped( GetLastCreatedItem(), GetTriggerUnit() )
    call RemoveLocation(udg__point1)
endfunction

//===========================================================================
function InitTrig_Spell_Baies_nourricieres takes nothing returns nothing
    set gg_trg_Spell_Baies_nourricieres = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Spell_Baies_nourricieres, EVENT_PLAYER_UNIT_SPELL_EFFECT )
    call TriggerAddCondition( gg_trg_Spell_Baies_nourricieres, Condition( function Trig_Spell_Baies_nourricieres_Conditions ) )
    call TriggerAddAction( gg_trg_Spell_Baies_nourricieres, function Trig_Spell_Baies_nourricieres_Actions )
endfunction

//===========================================================================
// Trigger: Spawn Select Class
//===========================================================================
function Trig_Spawn_Select_Class_Func002A takes nothing returns nothing
    call SetPlayerStateBJ( GetEnumPlayer(), PLAYER_STATE_RESOURCE_FOOD_CAP, 1 )
    set udg__point2 = GetPlayerStartLocationLoc(GetEnumPlayer())
    call CreateNUnitsAtLocFacingLocBJ( 1, 'h002', GetEnumPlayer(), udg__point2, udg__point1 )
    set udg_Characters[GetConvertedPlayerId(GetEnumPlayer())] = GetLastCreatedUnit()
    call PanCameraToTimedLocForPlayer( GetEnumPlayer(), udg__point1, 0.25 )
    call RemoveLocation(udg__point2)
endfunction

function Trig_Spawn_Select_Class_Func006A takes nothing returns nothing
    call SelectUnitForPlayerSingle( gg_unit_n00E_0065, GetEnumPlayer() )
endfunction

function Trig_Spawn_Select_Class_Actions takes nothing returns nothing
    set udg__point1 = GetUnitLoc(gg_unit_n00E_0065)
    call ForForce( udg_Players_Active, function Trig_Spawn_Select_Class_Func002A )
    call RemoveLocation(udg__point1)
    call TriggerSleepAction( 1.50 )
    call PlaySoundBJ( gg_snd_GLOBAL_ADVENTURE_START )
    call ForForce( udg_Players_Active, function Trig_Spawn_Select_Class_Func006A )
endfunction

//===========================================================================
function InitTrig_Spawn_Select_Class takes nothing returns nothing
    set gg_trg_Spawn_Select_Class = CreateTrigger(  )
    call TriggerRegisterTimerEventSingle( gg_trg_Spawn_Select_Class, 1.00 )
    call TriggerAddAction( gg_trg_Spawn_Select_Class, function Trig_Spawn_Select_Class_Actions )
endfunction

//===========================================================================
// Trigger: Class Selected
//===========================================================================
function Trig_Class_Selected_Func010C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetSoldUnit()) == 'h003' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Class_Selected_Func011C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetSoldUnit()) == 'h004' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Class_Selected_Func012C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetSoldUnit()) == 'h000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Class_Selected_Actions takes nothing returns nothing
    call ExplodeUnitBJ( udg_Characters[GetConvertedPlayerId(GetOwningPlayer(GetSoldUnit()))] )
    set udg_Characters[GetConvertedPlayerId(GetOwningPlayer(GetSoldUnit()))] = GetSoldUnit()
    call SelectUnitForPlayerSingle( GetSoldUnit(), GetOwningPlayer(GetSoldUnit()) )
    set udg__point1 = GetUnitLoc(GetSoldUnit())
    set udg__point2 = OffsetLocation(udg__point1, 512.00, 0)
    call IssuePointOrderLocBJ( GetSoldUnit(), "move", udg__point2 )
    call RemoveLocation(udg__point1)
    call RemoveLocation(udg__point2)
    // Update class meta-information
    if ( Trig_Class_Selected_Func010C() ) then
        call SetPlayerTechResearchedSwap( 'R002', 1, GetOwningPlayer(GetSoldUnit()) )
    else
    endif
    if ( Trig_Class_Selected_Func011C() ) then
        call SetPlayerTechResearchedSwap( 'R001', 1, GetOwningPlayer(GetSoldUnit()) )
        call SetUnitAbilityLevelSwapped( 'A00J', GetSoldUnit(), 2 )
        call UnitAddItemByIdSwapped( 'I00O', GetSoldUnit() )
        call UnitAddItemByIdSwapped( 'I00N', GetSoldUnit() )
        call SetItemCharges( GetLastCreatedItem(), 25 )
    else
    endif
    if ( Trig_Class_Selected_Func012C() ) then
        call SetPlayerTechResearchedSwap( 'R000', 1, GetOwningPlayer(GetSoldUnit()) )
    else
    endif
endfunction

//===========================================================================
function InitTrig_Class_Selected takes nothing returns nothing
    set gg_trg_Class_Selected = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Class_Selected, EVENT_PLAYER_UNIT_SELL )
    call TriggerAddAction( gg_trg_Class_Selected, function Trig_Class_Selected_Actions )
endfunction

//===========================================================================
// Trigger: Spell Book Initialization
//===========================================================================
function Trig_Spell_Book_Initialization_Actions takes nothing returns nothing
    // SPELL CLASSES
    set udg_SpellClass_Name[udg_CSPELLCLASS_ABJURATION] = "Abjuration"
    set udg_SpellClass_Name[udg_CSPELLCLASS_EVOCATION] = "Evocation"
    set udg_SpellClass_Name[udg_CSPELLCLASS_INVOCATION] = "Invocation"
    set udg_SpellClass_Name[udg_CSPELLCLASS_NECROMANCIE] = "Nécromancie"
    set udg_SpellClass_Name[udg_CSPELLCLASS_TRANSMUTATION] = "Transmutation"
    set udg_SpellClass_Count = udg_CSPELLCLASS_TRANSMUTATION
    // SPELLS
    set udg_Spells_Count = 0
    // #1 - Projectile magique
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A004'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_EVOCATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I009'
    // #2 - Nuage puant
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A005'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_INVOCATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I008'
    // #3 - Nuage mortel
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A008'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_INVOCATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I00A'
    // #4 - Nuage incendiaire
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00A'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_INVOCATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I00B'
    // #5 - Flétrissure abominable d'Abi-Dalzim
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00D'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_NECROMANCIE
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I007'
    // #6 - Hâte
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00O'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_TRANSMUTATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I00I'
    // #7 - Transmutation de la chair en pierre
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00E'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_TRANSMUTATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I005'
    // #8 - Renvoi de sorts
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00I'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_ABJURATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I00J'
    // #9 - Nuée de météores
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00P'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_EVOCATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I00K'
    // #10 - Baies nourricières
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00S'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_TRANSMUTATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I00M'
    // #11 - Cône de froid
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00W'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_EVOCATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I00P'
    // #12 - Incinérateur d'Aganazar
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00T'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_EVOCATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I00Q'
    // #13 - Feu solaire
    set udg_Spells_Count = ( udg_Spells_Count + 1 )
    set udg_Spells_Capacity[udg_Spells_Count] = 'A00Y'
    set udg_Spells_Class[udg_Spells_Count] = udg_CSPELLCLASS_EVOCATION
    set udg_Spells_MaxLevel[udg_Spells_Count] = 20
    set udg_Spells_ScrollType[udg_Spells_Count] = 'I00F'
    // End
endfunction

//===========================================================================
function InitTrig_Spell_Book_Initialization takes nothing returns nothing
    set gg_trg_Spell_Book_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Spell_Book_Initialization, function Trig_Spell_Book_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Spell Book Learn Scroll
//===========================================================================
function Trig_Spell_Book_Learn_Scroll_Conditions takes nothing returns boolean
    if ( not ( GetItemType(GetManipulatedItem()) == ITEM_TYPE_PERMANENT ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Book_Learn_Scroll_Func002Func001Func003Func002Func003C takes nothing returns boolean
    if ( not ( udg__int_LevelOfSpell == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Book_Learn_Scroll_Func002Func001Func003Func002C takes nothing returns boolean
    if ( not ( udg__int_LevelOfSpell < udg_Spells_MaxLevel[GetForLoopIndexA()] ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Book_Learn_Scroll_Func002Func001Func003C takes nothing returns boolean
    if ( not ( GetPlayerTechCountSimple('R000', GetOwningPlayer(GetTriggerUnit())) > 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Book_Learn_Scroll_Func002Func001C takes nothing returns boolean
    if ( not ( GetItemTypeId(GetManipulatedItem()) == udg_Spells_ScrollType[GetForLoopIndexA()] ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Book_Learn_Scroll_Actions takes nothing returns nothing
    // Search in the spell book if this is a known spell scroll
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = udg_Spells_Count
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Spell_Book_Learn_Scroll_Func002Func001C() ) then
            // Is the unit able to learn scrolls ?
            set udg__point1 = GetUnitLoc(GetTriggerUnit())
            if ( Trig_Spell_Book_Learn_Scroll_Func002Func001Func003C() ) then
                set udg__int_LevelOfSpell = GetUnitAbilityLevelSwapped(udg_Spells_Capacity[GetForLoopIndexA()], GetTriggerUnit())
                if ( Trig_Spell_Book_Learn_Scroll_Func002Func001Func003Func002C() ) then
                    if ( Trig_Spell_Book_Learn_Scroll_Func002Func001Func003Func002Func003C() ) then
                        call UnitAddAbilityBJ( udg_Spells_Capacity[GetForLoopIndexA()], GetTriggerUnit() )
                    else
                        call IncUnitAbilityLevelSwapped( udg_Spells_Capacity[GetForLoopIndexA()], GetTriggerUnit() )
                    endif
                    call AddSpecialEffectLocBJ( udg__point1, "Abilities\\Spells\\Other\\Charm\\CharmTarget.mdl" )
                    call DestroyEffectBJ( GetLastCreatedEffectBJ() )
                else
                    call DisplayTimedTextToForce( GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())), 10.00, "TRIGSTR_439" )
                endif
            else
                call DisplayTimedTextToForce( GetForceOfPlayer(GetOwningPlayer(GetTriggerUnit())), 10.00, "TRIGSTR_307" )
                call SetItemPositionLoc( GetManipulatedItem(), udg__point1 )
            endif
            call RemoveLocation(udg__point1)
            return
        else
        endif
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Spell_Book_Learn_Scroll takes nothing returns nothing
    set gg_trg_Spell_Book_Learn_Scroll = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Spell_Book_Learn_Scroll, EVENT_PLAYER_UNIT_USE_ITEM )
    call TriggerAddCondition( gg_trg_Spell_Book_Learn_Scroll, Condition( function Trig_Spell_Book_Learn_Scroll_Conditions ) )
    call TriggerAddAction( gg_trg_Spell_Book_Learn_Scroll, function Trig_Spell_Book_Learn_Scroll_Actions )
endfunction

//===========================================================================
// Trigger: Spell Book Learn Scroll Animation
//===========================================================================
function Trig_Spell_Book_Learn_Scroll_Animation_Conditions takes nothing returns boolean
    if ( not ( GetSpellAbilityId() == 'A000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Spell_Book_Learn_Scroll_Animation_Actions takes nothing returns nothing
    call SetUnitAnimationWithRarity( GetTriggerUnit(), "spell", RARITY_FREQUENT )
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = 4
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        call QueueUnitAnimationBJ( GetTriggerUnit(), "channel" )
        call QueueUnitAnimationBJ( GetTriggerUnit(), "spell" )
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Spell_Book_Learn_Scroll_Animation takes nothing returns nothing
    set gg_trg_Spell_Book_Learn_Scroll_Animation = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Spell_Book_Learn_Scroll_Animation, EVENT_PLAYER_UNIT_SPELL_CHANNEL )
    call TriggerAddCondition( gg_trg_Spell_Book_Learn_Scroll_Animation, Condition( function Trig_Spell_Book_Learn_Scroll_Animation_Conditions ) )
    call TriggerAddAction( gg_trg_Spell_Book_Learn_Scroll_Animation, function Trig_Spell_Book_Learn_Scroll_Animation_Actions )
endfunction

//===========================================================================
// Trigger: Adventures Metadata
//===========================================================================
function Trig_Adventures_Metadata_Actions takes nothing returns nothing
    set udg_Adventures_Count = 0
    // 1
    set udg_Adventures_Count = ( udg_Adventures_Count + 1 )
    set udg_Adventures_Bounds[udg_Adventures_Count] = gg_rct_Adv1
    set udg_Adventures_Title[udg_Adventures_Count] = "Le chemin sylvestre"
    set udg_Adventures_TriggerInit[udg_Adventures_Count] = gg_trg_Adv01_Initialization
    // 2
    set udg_Adventures_Count = ( udg_Adventures_Count + 1 )
    set udg_Adventures_Bounds[udg_Adventures_Count] = gg_rct_Adv2
    set udg_Adventures_Title[udg_Adventures_Count] = "L'ascension"
    set udg_Adventures_TriggerInit[udg_Adventures_Count] = gg_trg_Adv02_Initialization
    // End
    set udg_Adventures_Count = 2
    call TriggerExecute( gg_trg_Adventures_Initialization )
endfunction

//===========================================================================
function InitTrig_Adventures_Metadata takes nothing returns nothing
    set gg_trg_Adventures_Metadata = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adventures_Metadata, function Trig_Adventures_Metadata_Actions )
endfunction

//===========================================================================
// Trigger: Adventures Initialization
//
// Adv_Cur_UnitsData = Hashtable for meta data of units of the current adventure.
// Index 0 = Difficulty Coeff
// Index 1 = ?
//===========================================================================
function Trig_Adventures_Initialization_Func002Func002001002 takes nothing returns boolean
    return ( GetUnitTypeId(GetFilterUnit()) == 'n00B' )
endfunction

function Trig_Adventures_Initialization_Func002Func002A takes nothing returns nothing
    set udg_Adventures_SpawnOrientation[GetForLoopIndexA()] = GetUnitFacing(GetEnumUnit())
    set udg_Adventures_Spawn[GetForLoopIndexA()] = GetUnitLoc(GetEnumUnit())
    call RemoveUnit( GetEnumUnit() )
endfunction

function Trig_Adventures_Initialization_Func002Func005001002 takes nothing returns boolean
    return ( GetOwningPlayer(GetFilterUnit()) == Player(23) )
endfunction

function Trig_Adventures_Initialization_Func002Func005A takes nothing returns nothing
    set udg_Units_Count = ( udg_Units_Count + 1 )
    set udg_Units_Location[udg_Units_Count] = GetUnitLoc(GetEnumUnit())
    set udg_Units_Type[udg_Units_Count] = GetUnitTypeId(GetEnumUnit())
    set udg_Units_Invent1[udg_Units_Count] = GetItemTypeId(UnitItemInSlotBJ(GetEnumUnit(), 1))
    call RemoveUnit( GetEnumUnit() )
endfunction

function Trig_Adventures_Initialization_Actions takes nothing returns nothing
    set udg_Units_Count = 0
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = udg_Adventures_Count
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        // Spawn
        call ForGroupBJ( GetUnitsInRectMatching(udg_Adventures_Bounds[GetForLoopIndexA()], Condition(function Trig_Adventures_Initialization_Func002Func002001002)), function Trig_Adventures_Initialization_Func002Func002A )
        set udg_Adventures_Units_IndexMin[GetForLoopIndexA()] = udg_Units_Count
        // Unit groups
        call ForGroupBJ( GetUnitsInRectMatching(udg_Adventures_Bounds[GetForLoopIndexA()], Condition(function Trig_Adventures_Initialization_Func002Func005001002)), function Trig_Adventures_Initialization_Func002Func005A )
        set udg_Adventures_Units_IndexMax[GetForLoopIndexA()] = udg_Units_Count
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Adventures_Initialization takes nothing returns nothing
    set gg_trg_Adventures_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adventures_Initialization, function Trig_Adventures_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Adventures Cleanup Previous
//===========================================================================
function Trig_Adventures_Cleanup_Previous_Func002A takes nothing returns nothing
    call RemoveUnit( GetEnumUnit() )
endfunction

function Trig_Adventures_Cleanup_Previous_Actions takes nothing returns nothing
    // Cleanup previous adventure
    call ForGroupBJ( udg_Adv_Cur_RohalUnits, function Trig_Adventures_Cleanup_Previous_Func002A )
    call FlushParentHashtableBJ( udg_Adv_Cur_UnitsData )
endfunction

//===========================================================================
function InitTrig_Adventures_Cleanup_Previous takes nothing returns nothing
    set gg_trg_Adventures_Cleanup_Previous = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adventures_Cleanup_Previous, function Trig_Adventures_Cleanup_Previous_Actions )
endfunction

//===========================================================================
// Trigger: Adventures Start Next
//===========================================================================
function Trig_Adventures_Start_Next_Func002Func001C takes nothing returns boolean
    if ( ( udg_Adv_Cur_Index <= 0 ) ) then
        return true
    endif
    if ( ( udg_Adv_Cur_Index > udg_Adventures_Count ) ) then
        return true
    endif
    return false
endfunction

function Trig_Adventures_Start_Next_Func002C takes nothing returns boolean
    if ( not Trig_Adventures_Start_Next_Func002Func001C() ) then
        return false
    endif
    return true
endfunction

function Trig_Adventures_Start_Next_Func012A takes nothing returns nothing
    call ForceAddPlayerSimple( GetEnumPlayer(), udg_Players_Adventure )
    set udg__point1 = udg_Adventures_Spawn[udg_Adv_Cur_Index]
    call SetUnitPositionLocFacingBJ( udg_Characters[GetConvertedPlayerId(GetEnumPlayer())], udg__point1, udg_Adventures_SpawnOrientation[udg_Adv_Cur_Index] )
    call SelectUnitForPlayerSingle( udg_Characters[GetConvertedPlayerId(GetEnumPlayer())], GetEnumPlayer() )
    call PanCameraToTimedLocForPlayer( GetEnumPlayer(), udg__point1, 0.50 )
    // FIXME : call RemoveLocation(udg__point1)
endfunction

function Trig_Adventures_Start_Next_Actions takes nothing returns nothing
    // Pick new adventure and fade
    if ( Trig_Adventures_Start_Next_Func002C() ) then
        set udg_Adv_Cur_Index = GetRandomInt(1, udg_Adventures_Count)
    else
    endif
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEOUT, 2.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0 )
    // Spawn adventure units : ennemies/neutrals
    call TriggerExecute( gg_trg_Adventures_Restore_Markers )
    // Wait for fade in/out
    call TriggerSleepAction( 2.00 )
    call CinematicFadeBJ( bj_CINEFADETYPE_FADEIN, 2.00, "ReplaceableTextures\\CameraMasks\\White_mask.blp", 0, 0, 0, 0 )
    // Spawn player units
    call DisplayTimedTextToForce( udg_Players_Active, 20.00, ( "|c00ff4040Quête - " + ( udg_Adventures_Title[udg_Adv_Cur_Index] + ( "|r : " + "Texte" ) ) ) )
    call PlaySoundBJ( gg_snd_GLOBAL_ADVENTURE_START )
    call ForForce( udg_Players_Active, function Trig_Adventures_Start_Next_Func012A )
    // WARNING : DO NOT DO THIS : Set Players_Adventure = Players_Active
    call ForceClear( udg_Players_TownReady )
    call TriggerExecute( udg_Adventures_TriggerInit[udg_Adv_Cur_Index] )
endfunction

//===========================================================================
function InitTrig_Adventures_Start_Next takes nothing returns nothing
    set gg_trg_Adventures_Start_Next = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adventures_Start_Next, function Trig_Adventures_Start_Next_Actions )
endfunction

//===========================================================================
// Trigger: Adventures Restore Markers
//===========================================================================
function Trig_Adventures_Restore_Markers_Func004C takes nothing returns boolean
    if ( not ( udg__int1 < udg__int2 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adventures_Restore_Markers_Actions takes nothing returns nothing
    call GroupClear( udg_Adv_Cur_RohalUnits )
    set udg__int1 = udg_Adventures_Units_IndexMin[udg_Adv_Cur_Index]
    set udg__int2 = udg_Adventures_Units_IndexMax[udg_Adv_Cur_Index]
    if ( Trig_Adventures_Restore_Markers_Func004C() ) then
        set bj_forLoopAIndex = udg__int1
        set bj_forLoopAIndexEnd = udg__int2
        loop
            exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
            call CreateNUnitsAtLoc( 1, udg_Units_Type[GetForLoopIndexA()], Player(23), udg_Units_Location[GetForLoopIndexA()], udg_Units_Angle[GetForLoopIndexA()] )
            call UnitAddItemByIdSwapped( udg_Units_Invent1[GetForLoopIndexA()], GetLastCreatedUnit() )
            call GroupAddUnitSimple( GetLastCreatedUnit(), udg_Adv_Cur_RohalUnits )
            set bj_forLoopAIndex = bj_forLoopAIndex + 1
        endloop
    else
        call DisplayTimedTextToForce( GetPlayersAll(), 30.00, ( "BUG ? Il n'y a aucun groupe de monstres pour cette aventure ?! : " + I2S(udg__int1) ) )
    endif
endfunction

//===========================================================================
function InitTrig_Adventures_Restore_Markers takes nothing returns nothing
    set gg_trg_Adventures_Restore_Markers = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adventures_Restore_Markers, function Trig_Adventures_Restore_Markers_Actions )
endfunction

//===========================================================================
// Trigger: Adventures Function Spawn
//===========================================================================
function Trig_Adventures_Function_Spawn_Func005Func001C takes nothing returns boolean
    if ( not ( udg__Function_Spawn_CurrentPower < udg_Function_Spawn_MinimumPower ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adventures_Function_Spawn_Actions takes nothing returns nothing
    set udg__point1 = GetUnitLoc(udg_Function_Spawn_Marker)
    set udg__real1 = GetUnitFacing(udg_Function_Spawn_Marker)
    call RemoveUnit( udg_Function_Spawn_Marker )
    set udg__Function_Spawn_CurrentPower = 0.00
    set bj_forLoopAIndex = 1
    set bj_forLoopAIndexEnd = 100
    loop
        exitwhen bj_forLoopAIndex > bj_forLoopAIndexEnd
        if ( Trig_Adventures_Function_Spawn_Func005Func001C() ) then
            set udg__int1 = GetRandomInt(1, udg_Function_Spawn_UnitTypes_Count)
            call CreateNUnitsAtLoc( 1, udg_Function_Spawn_UnitTypes[udg__int1], Player(23), udg__point1, udg__real1 )
            call GroupAddUnitSimple( GetLastCreatedUnit(), udg_Adv_Cur_RohalUnits )
            set udg__Function_Spawn_CurrentPower = ( udg__Function_Spawn_CurrentPower + udg_Function_Spawn_PowerCoeff[udg__int1] )
        else
            call RemoveLocation(udg__point1)
            return
        endif
        set bj_forLoopAIndex = bj_forLoopAIndex + 1
    endloop
endfunction

//===========================================================================
function InitTrig_Adventures_Function_Spawn takes nothing returns nothing
    set gg_trg_Adventures_Function_Spawn = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adventures_Function_Spawn, function Trig_Adventures_Function_Spawn_Actions )
endfunction

//===========================================================================
// Trigger: Adventures Boss dead
//===========================================================================
function Trig_Adventures_Boss_dead_Conditions takes nothing returns boolean
    if ( not ( GetTriggerUnit() == udg_Adv_Cur_Boss ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adventures_Boss_dead_Actions takes nothing returns nothing
    call TriggerExecute( gg_trg_Adventures_End )
endfunction

//===========================================================================
function InitTrig_Adventures_Boss_dead takes nothing returns nothing
    set gg_trg_Adventures_Boss_dead = CreateTrigger(  )
    call TriggerRegisterAnyUnitEventBJ( gg_trg_Adventures_Boss_dead, EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Adventures_Boss_dead, Condition( function Trig_Adventures_Boss_dead_Conditions ) )
    call TriggerAddAction( gg_trg_Adventures_Boss_dead, function Trig_Adventures_Boss_dead_Actions )
endfunction

//===========================================================================
// Trigger: Adventures End
//===========================================================================
function Trig_Adventures_End_Actions takes nothing returns nothing
    call PlayMusicBJ( gg_snd_MUSIC_HUMANVICTORY )
    call ShowUnitShow( udg_Adv_Cur_Exit )
endfunction

//===========================================================================
function InitTrig_Adventures_End takes nothing returns nothing
    set gg_trg_Adventures_End = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adventures_End, function Trig_Adventures_End_Actions )
endfunction

//===========================================================================
// Trigger: Adventures Back To Town
//===========================================================================
function Trig_Adventures_Back_To_Town_Conditions takes nothing returns boolean
    if ( not ( udg_Adv_Cur_Exit != null ) ) then
        return false
    endif
    if ( not ( IsUnitHiddenBJ(udg_Adv_Cur_Exit) == false ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adventures_Back_To_Town_Func002Func003Func009C takes nothing returns boolean
    if ( not ( CountPlayersInForceBJ(udg_Players_Adventure) == 0 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adventures_Back_To_Town_Func002Func003C takes nothing returns boolean
    if ( not ( DistanceBetweenPoints(udg__point1, udg__point2) <= 192.00 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adventures_Back_To_Town_Func002A takes nothing returns nothing
    set udg__unit1 = udg_Characters[GetConvertedPlayerId(GetEnumPlayer())]
    set udg__point2 = GetUnitLoc(udg__unit1)
    if ( Trig_Adventures_Back_To_Town_Func002Func003C() ) then
        call AddSpecialEffectLocBJ( udg__point1, "Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl" )
        call DestroyEffectBJ( GetLastCreatedEffectBJ() )
        call AddSpecialEffectLocBJ( udg_CPOINT_BASE, "Abilities\\Spells\\Human\\MassTeleport\\MassTeleportTarget.mdl" )
        call DestroyEffectBJ( GetLastCreatedEffectBJ() )
        call SetUnitPositionLoc( udg__unit1, udg_CPOINT_BASE )
        call PanCameraToTimedLocForPlayer( GetEnumPlayer(), udg_CPOINT_BASE, 0.50 )
        call ForceRemovePlayerSimple( GetEnumPlayer(), udg_Players_Adventure )
        // Have all players left the adventure yet ?
        if ( Trig_Adventures_Back_To_Town_Func002Func003Func009C() ) then
            call TriggerExecute( gg_trg_Adventures_Cleanup_Previous )
        else
        endif
    else
    endif
    call RemoveLocation(udg__point2)
endfunction

function Trig_Adventures_Back_To_Town_Actions takes nothing returns nothing
    set udg__point1 = GetUnitLoc(udg_Adv_Cur_Exit)
    call ForForce( udg_Players_Active, function Trig_Adventures_Back_To_Town_Func002A )
    call RemoveLocation(udg__point1)
endfunction

//===========================================================================
function InitTrig_Adventures_Back_To_Town takes nothing returns nothing
    set gg_trg_Adventures_Back_To_Town = CreateTrigger(  )
    call TriggerRegisterTimerEventPeriodic( gg_trg_Adventures_Back_To_Town, 1.00 )
    call TriggerAddCondition( gg_trg_Adventures_Back_To_Town, Condition( function Trig_Adventures_Back_To_Town_Conditions ) )
    call TriggerAddAction( gg_trg_Adventures_Back_To_Town, function Trig_Adventures_Back_To_Town_Actions )
endfunction

//===========================================================================
// Trigger: Adventures Loot
//
// Available loots :
// - Gold coins
// - Bags
// - Spell scrolls
// - TODO Weapons
// - TODO Armors
//===========================================================================
function Trig_Adventures_Loot_Conditions takes nothing returns boolean
    if ( not ( IsUnitInGroup(GetTriggerUnit(), udg_Adv_Cur_RohalUnits) == true ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adventures_Loot_Func002C takes nothing returns boolean
    if ( not ( GetRandomInt(1, 10) >= 7 ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adventures_Loot_Actions takes nothing returns nothing
    if ( Trig_Adventures_Loot_Func002C() ) then
        set udg__point1 = GetUnitLoc(GetTriggerUnit())
        call CreateItemLoc( 'I003', udg__point1 )
        set udg__real1 = LoadRealBJ(0, GetHandleIdBJ(GetTriggerUnit()), udg_Adv_Cur_UnitsData)
        set udg__int1 = R2I(GetRandomReal(( 50.00 * udg__real1 ), ( 150.00 * udg__real1 )))
        call SetItemUserData( GetLastCreatedItem(), udg__int1 )
        call RemoveLocation(udg__point1)
    else
    endif
endfunction

//===========================================================================
function InitTrig_Adventures_Loot takes nothing returns nothing
    set gg_trg_Adventures_Loot = CreateTrigger(  )
    call TriggerRegisterPlayerUnitEventSimple( gg_trg_Adventures_Loot, Player(23), EVENT_PLAYER_UNIT_DEATH )
    call TriggerAddCondition( gg_trg_Adventures_Loot, Condition( function Trig_Adventures_Loot_Conditions ) )
    call TriggerAddAction( gg_trg_Adventures_Loot, function Trig_Adventures_Loot_Actions )
endfunction

//===========================================================================
// Trigger: Adv01 Initialization
//===========================================================================
function Trig_Adv01_Initialization_Func004Func004Func001Func009C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv01_Initialization_Func004Func004Func001Func011C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv01_Initialization_Func004Func004Func001Func013C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n002' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv01_Initialization_Func004Func004Func001Func015C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n005' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv01_Initialization_Func004Func004Func001Func017C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n004' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv01_Initialization_Func004Func004Func001Func019C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n003' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv01_Initialization_Func004Func004Func001C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n00H' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv01_Initialization_Func004Func004C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n00A' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv01_Initialization_Func004A takes nothing returns nothing
    set udg_Function_Spawn_Marker = GetEnumUnit()
    // SPECIFIC UNIT SPAWNS
    // Boss
    if ( Trig_Adv01_Initialization_Func004Func004C() ) then
        call ReplaceUnitBJ( udg_Function_Spawn_Marker, 'n00G', bj_UNIT_STATE_METHOD_RELATIVE )
        set udg_Adv_Cur_Boss = GetLastReplacedUnitBJ()
        call GroupAddUnitSimple( GetLastReplacedUnitBJ(), udg_Adv_Cur_RohalUnits )
        call BlzSetUnitMaxHP( udg_Adv_Cur_Boss, R2I(( GetUnitStateSwap(UNIT_STATE_MAX_LIFE, udg_Adv_Cur_Boss) * udg_Difficulty_Coeff )) )
        call BlzSetUnitArmor( udg_Adv_Cur_Boss, ( BlzGetUnitArmor(udg_Adv_Cur_Boss) * udg_Difficulty_Coeff ) )
        call BlzSetUnitBaseDamage( udg_Adv_Cur_Boss, R2I(( I2R(BlzGetUnitBaseDamage(udg_Adv_Cur_Boss, 1)) * udg_Difficulty_Time_Coeff )), 0 )
        call BlzSetUnitDiceSides( udg_Adv_Cur_Boss, R2I(( I2R(BlzGetUnitDiceSides(GetTriggerUnit(), 0)) * udg_Difficulty_Time_Coeff )), 0 )
    else
        if ( Trig_Adv01_Initialization_Func004Func004Func001C() ) then
            set udg_Adv_Cur_Exit = GetEnumUnit()
            call ShowUnitHide( udg_Adv_Cur_Exit )
            call SetUnitOwner( udg_Adv_Cur_Exit, Player(PLAYER_NEUTRAL_PASSIVE), true )
        else
            // Generic unit groups
            set udg_Function_Spawn_UnitTypes[1] = 'n00D'
            set udg_Function_Spawn_PowerCoeff[1] = 0.01
            set udg_Function_Spawn_UnitTypes[2] = 'n00C'
            set udg_Function_Spawn_PowerCoeff[2] = 0.02
            set udg_Function_Spawn_UnitTypes[3] = 'n00F'
            set udg_Function_Spawn_PowerCoeff[3] = 0.05
            // Petit | Faibles
            if ( Trig_Adv01_Initialization_Func004Func004Func001Func009C() ) then
                set udg_Function_Spawn_MinimumPower = ( 0.10 * udg_Difficulty_Coeff )
                set udg_Function_Spawn_UnitTypes_Count = 1
            else
            endif
            // Moyen | Faibles
            if ( Trig_Adv01_Initialization_Func004Func004Func001Func011C() ) then
                set udg_Function_Spawn_MinimumPower = ( 0.20 * udg_Difficulty_Coeff )
                set udg_Function_Spawn_UnitTypes_Count = 1
            else
            endif
            // Large | Faibles
            if ( Trig_Adv01_Initialization_Func004Func004Func001Func013C() ) then
                set udg_Function_Spawn_MinimumPower = ( 0.40 * udg_Difficulty_Coeff )
                set udg_Function_Spawn_UnitTypes_Count = 1
            else
            endif
            // Petit | Intermédiaires
            if ( Trig_Adv01_Initialization_Func004Func004Func001Func015C() ) then
                set udg_Function_Spawn_MinimumPower = ( 0.20 * udg_Difficulty_Coeff )
                set udg_Function_Spawn_UnitTypes_Count = 1
            else
            endif
            // Moyen | Intermédiaires
            if ( Trig_Adv01_Initialization_Func004Func004Func001Func017C() ) then
                set udg_Function_Spawn_MinimumPower = ( 0.40 * udg_Difficulty_Coeff )
                set udg_Function_Spawn_UnitTypes_Count = 3
            else
            endif
            // Large | Intermédiaires
            if ( Trig_Adv01_Initialization_Func004Func004Func001Func019C() ) then
                set udg_Function_Spawn_MinimumPower = ( 0.60 * udg_Difficulty_Coeff )
                set udg_Function_Spawn_UnitTypes_Count = 3
            else
            endif
            call TriggerExecute( gg_trg_Adventures_Function_Spawn )
        endif
    endif
endfunction

function Trig_Adv01_Initialization_Actions takes nothing returns nothing
    call PlayMusicBJ( gg_snd_MUSIC_DARKAGENTS )
    // Enable triggers
    // Configure spawns
    call ForGroupBJ( udg_Adv_Cur_RohalUnits, function Trig_Adv01_Initialization_Func004A )
endfunction

//===========================================================================
function InitTrig_Adv01_Initialization takes nothing returns nothing
    set gg_trg_Adv01_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adv01_Initialization, function Trig_Adv01_Initialization_Actions )
endfunction

//===========================================================================
// Trigger: Adv02 Initialization
//===========================================================================
function Trig_Adv02_Initialization_Func002Func008C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n001' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv02_Initialization_Func002Func010C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv02_Initialization_Func002Func012C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n000' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv02_Initialization_Func002Func014C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n005' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv02_Initialization_Func002Func016C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n004' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv02_Initialization_Func002Func018C takes nothing returns boolean
    if ( not ( GetUnitTypeId(GetEnumUnit()) == 'n003' ) ) then
        return false
    endif
    return true
endfunction

function Trig_Adv02_Initialization_Func002A takes nothing returns nothing
    set udg_Function_Spawn_Marker = GetEnumUnit()
    // -
    set udg_Function_Spawn_UnitTypes[1] = 'n00D'
    set udg_Function_Spawn_PowerCoeff[1] = 0.01
    set udg_Function_Spawn_UnitTypes[2] = 'n00C'
    set udg_Function_Spawn_PowerCoeff[2] = 0.02
    // Petit | Faibles
    if ( Trig_Adv02_Initialization_Func002Func008C() ) then
        set udg_Function_Spawn_MinimumPower = ( 0.10 * udg_Difficulty_Coeff )
        set udg_Function_Spawn_UnitTypes_Count = 1
    else
    endif
    // Moyen | Faibles
    if ( Trig_Adv02_Initialization_Func002Func010C() ) then
        set udg_Function_Spawn_MinimumPower = ( 0.20 * udg_Difficulty_Coeff )
        set udg_Function_Spawn_UnitTypes_Count = 1
    else
    endif
    // Large | Faibles
    if ( Trig_Adv02_Initialization_Func002Func012C() ) then
        set udg_Function_Spawn_MinimumPower = ( 0.40 * udg_Difficulty_Coeff )
        set udg_Function_Spawn_UnitTypes_Count = 1
    else
    endif
    // Petit | Intermédiaires
    if ( Trig_Adv02_Initialization_Func002Func014C() ) then
        set udg_Function_Spawn_MinimumPower = ( 0.20 * udg_Difficulty_Coeff )
        set udg_Function_Spawn_UnitTypes_Count = 1
    else
    endif
    // Moyen | Intermédiaires
    if ( Trig_Adv02_Initialization_Func002Func016C() ) then
        set udg_Function_Spawn_MinimumPower = ( 0.40 * udg_Difficulty_Coeff )
        set udg_Function_Spawn_UnitTypes_Count = 2
    else
    endif
    // Large | Intermédiaires
    if ( Trig_Adv02_Initialization_Func002Func018C() ) then
        set udg_Function_Spawn_MinimumPower = ( 0.60 * udg_Difficulty_Coeff )
        set udg_Function_Spawn_UnitTypes_Count = 2
    else
    endif
    call TriggerExecute( gg_trg_Adventures_Function_Spawn )
endfunction

function Trig_Adv02_Initialization_Actions takes nothing returns nothing
    call PlayMusicBJ( gg_snd_MUSIC_UNDEAD2 )
    call ForGroupBJ( udg_Adv_Cur_RohalUnits, function Trig_Adv02_Initialization_Func002A )
endfunction

//===========================================================================
function InitTrig_Adv02_Initialization takes nothing returns nothing
    set gg_trg_Adv02_Initialization = CreateTrigger(  )
    call TriggerAddAction( gg_trg_Adv02_Initialization, function Trig_Adv02_Initialization_Actions )
endfunction

//===========================================================================
function InitCustomTriggers takes nothing returns nothing
    call InitTrig_D__clencheur_sans_titre_003(  )
    call InitTrig_D__clencheur_sans_titre_001(  )
    call InitTrig_Initialization(  )
    call InitTrig_Constants(  )
    call InitTrig_Dummy_Dies(  )
    call InitTrig_Update_debug_mode(  )
    call InitTrig_Time(  )
    call InitTrig_Hints_Initialization(  )
    call InitTrig_Hints(  )
    call InitTrig_Command_Parse(  )
    call InitTrig_Command_Launch(  )
    call InitTrig_Player_Ready(  )
    call InitTrig_Player_Not_Ready(  )
    call InitTrig_Check_If_All_Players_Ready(  )
    call InitTrig_Object_Stacking(  )
    call InitTrig_Pickup_Gold(  )
    call InitTrig_Unique_Items_Initialization(  )
    call InitTrig_Bags_Initialization(  )
    call InitTrig_Bags_Equip(  )
    call InitTrig_Bags_Use_Magic_Bag(  )
    call InitTrig_Bags_Close_Magic_Bag(  )
    call InitTrig_Players_Initialization(  )
    call InitTrig_Player_Leaves(  )
    call InitTrig_Update_Active_Players(  )
    call InitTrig_New_Day(  )
    call InitTrig_Update_Difficulty(  )
    call InitTrig_Debug_Dummy_Display_Order_Strings(  )
    call InitTrig_Cast_Initialization(  )
    call InitTrig_Cast_Begin(  )
    call InitTrig_Cast_Initiate(  )
    call InitTrig_Cast_Stop(  )
    call InitTrig_Projectile_Magique_Initialization(  )
    call InitTrig_Projectile_Magique_Spell(  )
    call InitTrig_Projectile_Magique_Tasks(  )
    call InitTrig_AoE_Spells_Initialization(  )
    call InitTrig_AoE_Spells_Spell(  )
    call InitTrig_AoE_Spells_Tasks(  )
    call InitTrig_Rayon_Spells_Initialization(  )
    call InitTrig_Cone_Spells_Initialization(  )
    call InitTrig_Cone_Spells_Spell(  )
    call InitTrig_Cone_Spells_Tasks(  )
    call InitTrig_Cone_Spells_Spell_Stop(  )
    call InitTrig_Renvoi_de_sorts_spell(  )
    call InitTrig_Spells_Initialization(  )
    call InitTrig_Spell_Hate(  )
    call InitTrig_Spell_Transmutation_de_la_chair_en_pierre(  )
    call InitTrig_Spell_Transmutation_de_la_chair_en_pierre_Effects(  )
    call InitTrig_Spell_Baies_nourricieres(  )
    call InitTrig_Spawn_Select_Class(  )
    call InitTrig_Class_Selected(  )
    call InitTrig_Spell_Book_Initialization(  )
    call InitTrig_Spell_Book_Learn_Scroll(  )
    call InitTrig_Spell_Book_Learn_Scroll_Animation(  )
    call InitTrig_Adventures_Metadata(  )
    call InitTrig_Adventures_Initialization(  )
    call InitTrig_Adventures_Cleanup_Previous(  )
    call InitTrig_Adventures_Start_Next(  )
    call InitTrig_Adventures_Restore_Markers(  )
    call InitTrig_Adventures_Function_Spawn(  )
    call InitTrig_Adventures_Boss_dead(  )
    call InitTrig_Adventures_End(  )
    call InitTrig_Adventures_Back_To_Town(  )
    call InitTrig_Adventures_Loot(  )
    call InitTrig_Adv01_Initialization(  )
    call InitTrig_Adv02_Initialization(  )
endfunction

//===========================================================================
function RunInitializationTriggers takes nothing returns nothing
    call ConditionalTriggerExecute( gg_trg_Initialization )
    call ConditionalTriggerExecute( gg_trg_Constants )
    call ConditionalTriggerExecute( gg_trg_Hints_Initialization )
    call ConditionalTriggerExecute( gg_trg_Unique_Items_Initialization )
    call ConditionalTriggerExecute( gg_trg_Bags_Initialization )
    call ConditionalTriggerExecute( gg_trg_Players_Initialization )
    call ConditionalTriggerExecute( gg_trg_Update_Active_Players )
    call ConditionalTriggerExecute( gg_trg_Cast_Initialization )
    call ConditionalTriggerExecute( gg_trg_Projectile_Magique_Initialization )
    call ConditionalTriggerExecute( gg_trg_AoE_Spells_Initialization )
    call ConditionalTriggerExecute( gg_trg_Rayon_Spells_Initialization )
    call ConditionalTriggerExecute( gg_trg_Cone_Spells_Initialization )
    call ConditionalTriggerExecute( gg_trg_Spells_Initialization )
    call ConditionalTriggerExecute( gg_trg_Spell_Book_Initialization )
    call ConditionalTriggerExecute( gg_trg_Adventures_Metadata )
endfunction

//***************************************************************************
//*
//*  Players
//*
//***************************************************************************

function InitCustomPlayerSlots takes nothing returns nothing

    // Player 0
    call SetPlayerStartLocation( Player(0), 0 )
    call ForcePlayerStartLocation( Player(0), 0 )
    call SetPlayerColor( Player(0), ConvertPlayerColor(0) )
    call SetPlayerRacePreference( Player(0), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(0), true )
    call SetPlayerController( Player(0), MAP_CONTROL_USER )

    // Player 1
    call SetPlayerStartLocation( Player(1), 1 )
    call ForcePlayerStartLocation( Player(1), 1 )
    call SetPlayerColor( Player(1), ConvertPlayerColor(1) )
    call SetPlayerRacePreference( Player(1), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(1), true )
    call SetPlayerController( Player(1), MAP_CONTROL_USER )

    // Player 2
    call SetPlayerStartLocation( Player(2), 2 )
    call ForcePlayerStartLocation( Player(2), 2 )
    call SetPlayerColor( Player(2), ConvertPlayerColor(2) )
    call SetPlayerRacePreference( Player(2), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(2), true )
    call SetPlayerController( Player(2), MAP_CONTROL_USER )

    // Player 3
    call SetPlayerStartLocation( Player(3), 3 )
    call ForcePlayerStartLocation( Player(3), 3 )
    call SetPlayerColor( Player(3), ConvertPlayerColor(3) )
    call SetPlayerRacePreference( Player(3), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(3), true )
    call SetPlayerController( Player(3), MAP_CONTROL_USER )

    // Player 4
    call SetPlayerStartLocation( Player(4), 4 )
    call ForcePlayerStartLocation( Player(4), 4 )
    call SetPlayerColor( Player(4), ConvertPlayerColor(4) )
    call SetPlayerRacePreference( Player(4), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(4), true )
    call SetPlayerController( Player(4), MAP_CONTROL_USER )

    // Player 5
    call SetPlayerStartLocation( Player(5), 5 )
    call ForcePlayerStartLocation( Player(5), 5 )
    call SetPlayerColor( Player(5), ConvertPlayerColor(5) )
    call SetPlayerRacePreference( Player(5), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(5), true )
    call SetPlayerController( Player(5), MAP_CONTROL_USER )

    // Player 6
    call SetPlayerStartLocation( Player(6), 6 )
    call ForcePlayerStartLocation( Player(6), 6 )
    call SetPlayerColor( Player(6), ConvertPlayerColor(6) )
    call SetPlayerRacePreference( Player(6), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(6), true )
    call SetPlayerController( Player(6), MAP_CONTROL_USER )

    // Player 7
    call SetPlayerStartLocation( Player(7), 7 )
    call ForcePlayerStartLocation( Player(7), 7 )
    call SetPlayerColor( Player(7), ConvertPlayerColor(7) )
    call SetPlayerRacePreference( Player(7), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(7), true )
    call SetPlayerController( Player(7), MAP_CONTROL_USER )

    // Player 8
    call SetPlayerStartLocation( Player(8), 8 )
    call ForcePlayerStartLocation( Player(8), 8 )
    call SetPlayerColor( Player(8), ConvertPlayerColor(8) )
    call SetPlayerRacePreference( Player(8), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(8), true )
    call SetPlayerController( Player(8), MAP_CONTROL_USER )

    // Player 9
    call SetPlayerStartLocation( Player(9), 9 )
    call ForcePlayerStartLocation( Player(9), 9 )
    call SetPlayerColor( Player(9), ConvertPlayerColor(9) )
    call SetPlayerRacePreference( Player(9), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(9), true )
    call SetPlayerController( Player(9), MAP_CONTROL_USER )

    // Player 10
    call SetPlayerStartLocation( Player(10), 10 )
    call ForcePlayerStartLocation( Player(10), 10 )
    call SetPlayerColor( Player(10), ConvertPlayerColor(10) )
    call SetPlayerRacePreference( Player(10), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(10), true )
    call SetPlayerController( Player(10), MAP_CONTROL_USER )

    // Player 11
    call SetPlayerStartLocation( Player(11), 11 )
    call ForcePlayerStartLocation( Player(11), 11 )
    call SetPlayerColor( Player(11), ConvertPlayerColor(11) )
    call SetPlayerRacePreference( Player(11), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(11), true )
    call SetPlayerController( Player(11), MAP_CONTROL_USER )

    // Player 12
    call SetPlayerStartLocation( Player(12), 12 )
    call ForcePlayerStartLocation( Player(12), 12 )
    call SetPlayerColor( Player(12), ConvertPlayerColor(12) )
    call SetPlayerRacePreference( Player(12), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(12), true )
    call SetPlayerController( Player(12), MAP_CONTROL_USER )

    // Player 13
    call SetPlayerStartLocation( Player(13), 13 )
    call ForcePlayerStartLocation( Player(13), 13 )
    call SetPlayerColor( Player(13), ConvertPlayerColor(13) )
    call SetPlayerRacePreference( Player(13), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(13), true )
    call SetPlayerController( Player(13), MAP_CONTROL_USER )

    // Player 14
    call SetPlayerStartLocation( Player(14), 14 )
    call ForcePlayerStartLocation( Player(14), 14 )
    call SetPlayerColor( Player(14), ConvertPlayerColor(14) )
    call SetPlayerRacePreference( Player(14), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(14), true )
    call SetPlayerController( Player(14), MAP_CONTROL_USER )

    // Player 15
    call SetPlayerStartLocation( Player(15), 15 )
    call ForcePlayerStartLocation( Player(15), 15 )
    call SetPlayerColor( Player(15), ConvertPlayerColor(15) )
    call SetPlayerRacePreference( Player(15), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(15), true )
    call SetPlayerController( Player(15), MAP_CONTROL_USER )

    // Player 16
    call SetPlayerStartLocation( Player(16), 16 )
    call ForcePlayerStartLocation( Player(16), 16 )
    call SetPlayerColor( Player(16), ConvertPlayerColor(16) )
    call SetPlayerRacePreference( Player(16), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(16), true )
    call SetPlayerController( Player(16), MAP_CONTROL_USER )

    // Player 17
    call SetPlayerStartLocation( Player(17), 17 )
    call ForcePlayerStartLocation( Player(17), 17 )
    call SetPlayerColor( Player(17), ConvertPlayerColor(17) )
    call SetPlayerRacePreference( Player(17), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(17), true )
    call SetPlayerController( Player(17), MAP_CONTROL_USER )

    // Player 18
    call SetPlayerStartLocation( Player(18), 18 )
    call ForcePlayerStartLocation( Player(18), 18 )
    call SetPlayerColor( Player(18), ConvertPlayerColor(18) )
    call SetPlayerRacePreference( Player(18), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(18), true )
    call SetPlayerController( Player(18), MAP_CONTROL_USER )

    // Player 19
    call SetPlayerStartLocation( Player(19), 19 )
    call ForcePlayerStartLocation( Player(19), 19 )
    call SetPlayerColor( Player(19), ConvertPlayerColor(19) )
    call SetPlayerRacePreference( Player(19), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(19), true )
    call SetPlayerController( Player(19), MAP_CONTROL_USER )

    // Player 21
    call SetPlayerStartLocation( Player(21), 20 )
    call ForcePlayerStartLocation( Player(21), 20 )
    call SetPlayerColor( Player(21), ConvertPlayerColor(21) )
    call SetPlayerRacePreference( Player(21), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(21), true )
    call SetPlayerController( Player(21), MAP_CONTROL_COMPUTER )

    // Player 22
    call SetPlayerStartLocation( Player(22), 21 )
    call ForcePlayerStartLocation( Player(22), 21 )
    call SetPlayerColor( Player(22), ConvertPlayerColor(22) )
    call SetPlayerRacePreference( Player(22), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(22), true )
    call SetPlayerController( Player(22), MAP_CONTROL_COMPUTER )

    // Player 23
    call SetPlayerStartLocation( Player(23), 22 )
    call ForcePlayerStartLocation( Player(23), 22 )
    call SetPlayerColor( Player(23), ConvertPlayerColor(23) )
    call SetPlayerRacePreference( Player(23), RACE_PREF_RANDOM )
    call SetPlayerRaceSelectable( Player(23), true )
    call SetPlayerController( Player(23), MAP_CONTROL_COMPUTER )

endfunction

function InitCustomTeams takes nothing returns nothing
    // Force: TRIGSTR_008
    call SetPlayerTeam( Player(0), 0 )
    call SetPlayerState( Player(0), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(1), 0 )
    call SetPlayerState( Player(1), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(2), 0 )
    call SetPlayerState( Player(2), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(3), 0 )
    call SetPlayerState( Player(3), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(4), 0 )
    call SetPlayerState( Player(4), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(5), 0 )
    call SetPlayerState( Player(5), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(6), 0 )
    call SetPlayerState( Player(6), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(7), 0 )
    call SetPlayerState( Player(7), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(8), 0 )
    call SetPlayerState( Player(8), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(9), 0 )
    call SetPlayerState( Player(9), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(10), 0 )
    call SetPlayerState( Player(10), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(11), 0 )
    call SetPlayerState( Player(11), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(12), 0 )
    call SetPlayerState( Player(12), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(13), 0 )
    call SetPlayerState( Player(13), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(14), 0 )
    call SetPlayerState( Player(14), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(15), 0 )
    call SetPlayerState( Player(15), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(16), 0 )
    call SetPlayerState( Player(16), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(17), 0 )
    call SetPlayerState( Player(17), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(18), 0 )
    call SetPlayerState( Player(18), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(19), 0 )
    call SetPlayerState( Player(19), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(21), 0 )
    call SetPlayerState( Player(21), PLAYER_STATE_ALLIED_VICTORY, 1 )

    //   Allied
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(0), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(1), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(2), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(3), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(4), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(5), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(6), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(7), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(8), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(9), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(10), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(11), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(12), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(13), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(14), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(15), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(16), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(17), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(19), true )
    call SetPlayerAllianceStateAllyBJ( Player(18), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(19), Player(21), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(0), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(1), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(2), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(3), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(4), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(5), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(6), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(7), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(8), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(9), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(10), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(11), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(12), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(13), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(14), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(15), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(16), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(17), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(18), true )
    call SetPlayerAllianceStateAllyBJ( Player(21), Player(19), true )

    //   Shared Vision
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(0), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(1), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(2), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(3), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(4), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(5), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(6), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(7), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(8), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(9), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(10), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(11), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(12), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(13), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(14), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(15), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(16), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(17), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(19), true )
    call SetPlayerAllianceStateVisionBJ( Player(18), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(19), Player(21), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(0), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(1), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(2), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(3), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(4), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(5), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(6), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(7), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(8), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(9), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(10), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(11), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(12), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(13), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(14), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(15), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(16), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(17), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(18), true )
    call SetPlayerAllianceStateVisionBJ( Player(21), Player(19), true )

    // Force: TRIGSTR_030
    call SetPlayerTeam( Player(22), 1 )
    call SetPlayerState( Player(22), PLAYER_STATE_ALLIED_VICTORY, 1 )
    call SetPlayerTeam( Player(23), 1 )
    call SetPlayerState( Player(23), PLAYER_STATE_ALLIED_VICTORY, 1 )

    //   Allied
    call SetPlayerAllianceStateAllyBJ( Player(22), Player(23), true )
    call SetPlayerAllianceStateAllyBJ( Player(23), Player(22), true )

endfunction

function InitAllyPriorities takes nothing returns nothing

    call SetStartLocPrioCount( 0, 19 )
    call SetStartLocPrio( 0, 0, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 1, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 2, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 3, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 4, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 5, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 6, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 7, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 8, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 0, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 1, 19 )
    call SetStartLocPrio( 1, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 1, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 2, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 3, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 4, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 5, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 6, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 7, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 8, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 1, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 2, 19 )
    call SetStartLocPrio( 2, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 2, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 3, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 4, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 5, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 6, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 7, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 8, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 2, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 3, 19 )
    call SetStartLocPrio( 3, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 3, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 4, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 5, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 6, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 7, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 8, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 3, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 4, 19 )
    call SetStartLocPrio( 4, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 4, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 5, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 6, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 7, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 8, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 4, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 5, 19 )
    call SetStartLocPrio( 5, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 5, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 6, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 7, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 8, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 5, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 6, 19 )
    call SetStartLocPrio( 6, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 6, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 7, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 8, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 6, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 7, 19 )
    call SetStartLocPrio( 7, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 7, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 8, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 7, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 8, 19 )
    call SetStartLocPrio( 8, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 8, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 8, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 9, 19 )
    call SetStartLocPrio( 9, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 9, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 9, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 10, 19 )
    call SetStartLocPrio( 10, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 10, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 10, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 11, 19 )
    call SetStartLocPrio( 11, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 10, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 11, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 11, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 12, 19 )
    call SetStartLocPrio( 12, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 10, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 11, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 12, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 12, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 13, 19 )
    call SetStartLocPrio( 13, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 10, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 11, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 12, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 13, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 13, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 14, 19 )
    call SetStartLocPrio( 14, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 10, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 11, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 12, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 13, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 14, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 14, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 15, 19 )
    call SetStartLocPrio( 15, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 10, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 11, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 12, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 13, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 14, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 15, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 15, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 16, 19 )
    call SetStartLocPrio( 16, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 10, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 11, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 12, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 13, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 14, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 15, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 16, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 16, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 17, 19 )
    call SetStartLocPrio( 17, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 10, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 11, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 12, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 13, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 14, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 15, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 16, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 17, 18, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 17, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 18, 19 )
    call SetStartLocPrio( 18, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 10, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 11, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 12, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 13, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 14, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 15, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 16, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 17, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 18, 18, 19, MAP_LOC_PRIO_HIGH )

    call SetStartLocPrioCount( 19, 19 )
    call SetStartLocPrio( 19, 0, 0, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 1, 1, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 2, 2, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 3, 3, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 4, 4, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 5, 5, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 6, 6, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 7, 7, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 8, 8, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 9, 9, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 10, 10, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 11, 11, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 12, 12, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 13, 13, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 14, 14, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 15, 15, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 16, 16, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 17, 17, MAP_LOC_PRIO_HIGH )
    call SetStartLocPrio( 19, 18, 18, MAP_LOC_PRIO_HIGH )
endfunction

//***************************************************************************
//*
//*  Main Initialization
//*
//***************************************************************************

//===========================================================================
function main takes nothing returns nothing
    call SetCameraBounds( -5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), -7168.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM), 8576.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), 5120.0 - GetCameraMargin(CAMERA_MARGIN_TOP), -5376.0 + GetCameraMargin(CAMERA_MARGIN_LEFT), 5120.0 - GetCameraMargin(CAMERA_MARGIN_TOP), 8576.0 - GetCameraMargin(CAMERA_MARGIN_RIGHT), -7168.0 + GetCameraMargin(CAMERA_MARGIN_BOTTOM) )
    call SetDayNightModels( "Environment\\DNC\\DNCLordaeron\\DNCLordaeronTerrain\\DNCLordaeronTerrain.mdl", "Environment\\DNC\\DNCLordaeron\\DNCLordaeronUnit\\DNCLordaeronUnit.mdl" )
    call NewSoundEnvironment( "Default" )
    call SetAmbientDaySound( "SunkenRuinsDay" )
    call SetAmbientNightSound( "SunkenRuinsNight" )
    call SetMapMusic( "Music", true, 0 )
    call InitSounds(  )
    call CreateRegions(  )
    call CreateAllItems(  )
    call CreateAllUnits(  )
    call InitBlizzard(  )
    call InitGlobals(  )
    call InitCustomTriggers(  )
    call RunInitializationTriggers(  )

endfunction

//***************************************************************************
//*
//*  Map Configuration
//*
//***************************************************************************

function config takes nothing returns nothing
    call SetMapName( "TRIGSTR_001" )
    call SetMapDescription( "TRIGSTR_003" )
    call SetPlayers( 23 )
    call SetTeams( 23 )
    call SetGamePlacement( MAP_PLACEMENT_TEAMS_TOGETHER )

    call DefineStartLocation( 0, -4288.0, 3456.0 )
    call DefineStartLocation( 1, -4288.0, 3456.0 )
    call DefineStartLocation( 2, -4288.0, 3456.0 )
    call DefineStartLocation( 3, -4288.0, 3456.0 )
    call DefineStartLocation( 4, -4288.0, 3456.0 )
    call DefineStartLocation( 5, -4288.0, 3456.0 )
    call DefineStartLocation( 6, -4288.0, 3456.0 )
    call DefineStartLocation( 7, -4288.0, 3456.0 )
    call DefineStartLocation( 8, -4288.0, 3456.0 )
    call DefineStartLocation( 9, -4288.0, 3456.0 )
    call DefineStartLocation( 10, -4288.0, 3456.0 )
    call DefineStartLocation( 11, -4288.0, 3456.0 )
    call DefineStartLocation( 12, -4288.0, 3456.0 )
    call DefineStartLocation( 13, -4288.0, 3456.0 )
    call DefineStartLocation( 14, -4288.0, 3456.0 )
    call DefineStartLocation( 15, -4288.0, 3456.0 )
    call DefineStartLocation( 16, -4288.0, 3456.0 )
    call DefineStartLocation( 17, -4288.0, 3456.0 )
    call DefineStartLocation( 18, -4288.0, 3456.0 )
    call DefineStartLocation( 19, -4288.0, 3456.0 )
    call DefineStartLocation( 20, -3264.0, 1408.0 )
    call DefineStartLocation( 21, -448.0, 3712.0 )
    call DefineStartLocation( 22, 0.0, -64.0 )

    // Player setup
    call InitCustomPlayerSlots(  )
    call InitCustomTeams(  )
    call InitAllyPriorities(  )
endfunction

